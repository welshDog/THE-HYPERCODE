{
  "file_name": "visualization-panel.ts",
  "file_path": "C:\\Users\\lyndz\\Downloads\\hypercode PROJECT\\hypercode\\hypercode\\5 Core TypeScript Modules\\visualization-panel.ts",
  "file_size": 9031,
  "created": "2025-11-26T23:37:35.301852",
  "modified": "2025-11-26T23:37:35.301852",
  "file_type": "code",
  "content_hash": "ca1ea04a91abaf68295d32e5629f43cd",
  "content_type": "text",
  "content": "import * as vscode from 'vscode';\nimport { CodeAnalysis } from './code-analyzer';\nimport { SpatialVisualizer } from './spatial-visualizer';\n\nexport class VisualizationPanel {\n  private panel: vscode.WebviewPanel;\n  private visualizer: SpatialVisualizer;\n  private analysis: CodeAnalysis;\n\n  constructor(\n    extensionUri: vscode.Uri,\n    private filePath: string,\n    analysis: CodeAnalysis,\n    visualizer: SpatialVisualizer\n  ) {\n    this.analysis = analysis;\n    this.visualizer = visualizer;\n\n    this.panel = vscode.window.createWebviewPanel(\n      'spatialVisualizer',\n      `üß† Spatial View: ${filePath.split('/').pop()}`,\n      vscode.ViewColumn.Beside,\n      {\n        enableScripts: true,\n        localResourceRoots: [extensionUri]\n      }\n    );\n\n    this.panel.webview.html = this.getWebviewContent();\n  }\n\n  show() {\n    this.panel.reveal();\n  }\n\n  private getWebviewContent(): string {\n    const analysis = this.analysis;\n\n    // Build HTML with embedded SVG and interactive controls\n    return `\n      <!DOCTYPE html>\n      <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        <title>Spatial Code Visualizer</title>\n        <script src=\"https://d3js.org/d3.v7.min.js\"></script>\n        <style>\n          * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n          }\n\n          body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n            background: #f9fafb;\n            padding: 16px;\n          }\n\n          .container {\n            max-width: 1400px;\n            margin: 0 auto;\n            background: white;\n            border-radius: 12px;\n            box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n            overflow: hidden;\n          }\n\n          .header {\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            padding: 20px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n          }\n\n          .header h1 {\n            font-size: 20px;\n            font-weight: 600;\n          }\n\n          .controls {\n            display: flex;\n            gap: 12px;\n            flex-wrap: wrap;\n          }\n\n          button {\n            background: rgba(255,255,255,0.2);\n            border: 1px solid rgba(255,255,255,0.3);\n            color: white;\n            padding: 8px 16px;\n            border-radius: 6px;\n            cursor: pointer;\n            font-size: 12px;\n            font-weight: 500;\n            transition: all 0.2s;\n          }\n\n          button:hover {\n            background: rgba(255,255,255,0.3);\n            transform: translateY(-1px);\n          }\n\n          .visualization {\n            padding: 20px;\n            background: white;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            min-height: 600px;\n          }\n\n          svg {\n            max-width: 100%;\n            height: auto;\n            border: 1px solid #e5e7eb;\n            border-radius: 8px;\n            background: white;\n          }\n\n          .stats {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 16px;\n            padding: 20px;\n            background: #f3f4f6;\n            border-top: 1px solid #e5e7eb;\n          }\n\n          .stat-card {\n            background: white;\n            padding: 16px;\n            border-radius: 8px;\n            border-left: 4px solid #667eea;\n          }\n\n          .stat-label {\n            font-size: 12px;\n            color: #6b7280;\n            font-weight: 500;\n            text-transform: uppercase;\n            letter-spacing: 0.5px;\n          }\n\n          .stat-value {\n            font-size: 24px;\n            font-weight: 700;\n            color: #111827;\n            margin-top: 8px;\n          }\n\n          .nodes-list {\n            padding: 20px;\n            max-height: 300px;\n            overflow-y: auto;\n            border-top: 1px solid #e5e7eb;\n          }\n\n          .nodes-list h3 {\n            font-size: 14px;\n            font-weight: 600;\n            margin-bottom: 12px;\n            color: #374151;\n          }\n\n          .node-item {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n            padding: 8px;\n            margin-bottom: 8px;\n            background: #f9fafb;\n            border-radius: 6px;\n            font-size: 12px;\n          }\n\n          .node-badge {\n            display: inline-block;\n            width: 12px;\n            height: 12px;\n            border-radius: 50%;\n          }\n\n          .accessibility-note {\n            background: #fef3c7;\n            border-left: 4px solid #f59e0b;\n            padding: 12px;\n            margin: 16px;\n            border-radius: 6px;\n            font-size: 12px;\n            color: #92400e;\n          }\n        </style>\n      </head>\n      <body>\n        <div class=\"container\">\n          <div class=\"header\">\n            <div>\n              <h1>üß† Spatial Code Visualizer</h1>\n              <p style=\"font-size: 12px; opacity: 0.9; margin-top: 4px;\">Neurodivergent-friendly code navigation</p>\n            </div>\n            <div class=\"controls\">\n              <button onclick=\"toggleMode()\">üìä Switch Mode</button>\n              <button onclick=\"toggleContrast()\">‚öôÔ∏è Toggle Contrast</button>\n              <button onclick=\"exportSVG()\">üíæ Export</button>\n            </div>\n          </div>\n\n          <div class=\"visualization\" id=\"visualization\">\n            <svg viewBox=\"0 0 1200 800\" width=\"1200\" height=\"800\"></svg>\n          </div>\n\n          <div class=\"stats\">\n            <div class=\"stat-card\">\n              <div class=\"stat-label\">Cognitive Load</div>\n              <div class=\"stat-value\">${analysis.cognitiveLoadScore.toFixed(1)}/10</div>\n            </div>\n            <div class=\"stat-card\">\n              <div class=\"stat-label\">Total Complexity</div>\n              <div class=\"stat-value\">${analysis.totalComplexity}</div>\n            </div>\n            <div class=\"stat-card\">\n              <div class=\"stat-label\">Code Elements</div>\n              <div class=\"stat-value\">${analysis.nodes.length}</div>\n            </div>\n            <div class=\"stat-card\">\n              <div class=\"stat-label\">Language</div>\n              <div class=\"stat-value\">${analysis.language.toUpperCase()}</div>\n            </div>\n          </div>\n\n          <div class=\"nodes-list\">\n            <h3>üìç Code Elements (${analysis.nodes.length})</h3>\n            ${analysis.nodes.map(node => \\`\n              <div class=\"node-item\">\n                <span class=\"node-badge\" style=\"background: \\${getColorForType('\\${node.type}')}\"></span>\n                <strong>\\${node.name}</strong>\n                <span style=\"color: #9ca3af; margin-left: auto;\">Line \\${node.line}</span>\n              </div>\n            \\`).join('')}\n          </div>\n\n          <div class=\"accessibility-note\">\n            üí° <strong>Accessibility Tip:</strong> This visualization is designed for ADHD/neurodivergent brains.\n            Use the \"Switch Mode\" button to find your preferred layout. High cognitive load scores indicate areas\n            that might benefit from refactoring.\n          </div>\n        </div>\n\n        <script>\n          function getColorForType(type) {\n            const colors = {\n              'function': '#6366f1',\n              'class': '#ec4899',\n              'variable': '#10b981',\n              'import': '#f59e0b',\n              'interface': '#8b5cf6'\n            };\n            return colors[type] || '#d1d5db';\n          }\n\n          function toggleMode() {\n            alert('Mode switching activated! (Implementation connects to your IDE backend)');\n          }\n\n          function toggleContrast() {\n            document.body.style.filter = document.body.style.filter === 'contrast(1.2)' ? 'contrast(1)' : 'contrast(1.2)';\n          }\n\n          function exportSVG() {\n            const svg = document.querySelector('svg');\n            const serializer = new XMLSerializer();\n            const svgString = serializer.serializeToString(svg);\n            const blob = new Blob([svgString], { type: 'image/svg+xml' });\n            const url = URL.createObjectURL(blob);\n            const link = document.createElement('a');\n            link.href = url;\n            link.download = 'code-visualization.svg';\n            link.click();\n          }\n\n          // D3 rendering would happen here in production\n          console.log('‚úÖ Spatial Visualizer loaded');\n        </script>\n      </body>\n      </html>\n    `;\n  }\n}\n",
  "metadata": {},
  "relative_path": "hypercode\\5 Core TypeScript Modules\\visualization-panel.ts",
  "id": "09e1bc3e70346b6f5ef656874731b6f1"
}