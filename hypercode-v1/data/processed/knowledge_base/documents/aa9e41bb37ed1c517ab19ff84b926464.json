{
  "file_name": "sensory_profile.py",
  "file_path": "C:\\Users\\lyndz\\Downloads\\hypercode PROJECT\\hypercode\\hypercode\\src\\hypercode\\core\\sensory_profile.py",
  "file_size": 8345,
  "created": "2025-11-26T23:37:35.642875",
  "modified": "2025-12-04T00:57:01.014737",
  "file_type": "code",
  "content_hash": "9c7980fd242125c645b2e7aa41bd9add",
  "content_type": "text",
  "content": "\"\"\"\nSensory Profile System for HyperCode\n\nThis module handles the configuration of sensory profiles that customize the\ncoding environment for different neurodivergent needs.\n\"\"\"\n\nfrom dataclasses import dataclass, asdict, field\nfrom enum import Enum\nimport json\nfrom pathlib import Path\nfrom typing import Dict, Any, Optional, Type, TypeVar, List\n\n\nclass VisualNoiseLevel(str, Enum):\n    NONE = \"none\"\n    LOW = \"low\"\n    MEDIUM = \"medium\"\n    HIGH = \"high\"\n\n\nclass AnimationSpeed(float, Enum):\n    SLOW = 0.5\n    NORMAL = 1.0\n    FAST = 1.5\n\n\n@dataclass\nclass VisualSettings:\n    \"\"\"Configuration for visual aspects of the editor.\"\"\"\n\n    theme: str = \"dark\"\n    font_family: str = \"Fira Code\"\n    font_size: int = 14\n    line_height: float = 1.5\n    visual_noise: VisualNoiseLevel = VisualNoiseLevel.LOW\n    show_line_numbers: bool = True\n    show_minimap: bool = False\n    show_gutter_icons: bool = True\n\n\n@dataclass\nclass AudioSettings:\n    \"\"\"Configuration for audio feedback.\"\"\"\n\n    enabled: bool = False\n    volume: float = 0.5  # 0.0 to 1.0\n    sound_effects: Dict[str, str] = field(\n        default_factory=lambda: {\n            \"error\": \"soft_beep\",\n            \"completion\": \"none\",\n            \"notification\": \"none\",\n        }\n    )\n\n\n@dataclass\nclass AnimationSettings:\n    \"\"\"Configuration for animations and transitions.\"\"\"\n\n    enabled: bool = True\n    speed: AnimationSpeed = AnimationSpeed.NORMAL\n    cursor_style: str = \"block\"\n    smooth_scrolling: bool = True\n\n\n@dataclass\nclass SensoryProfile:\n    \"\"\"A complete sensory profile configuration.\"\"\"\n\n    name: str\n    description: str = \"\"\n    visual: VisualSettings = field(default_factory=VisualSettings)\n    audio: AudioSettings = field(default_factory=AudioSettings)\n    animation: AnimationSettings = field(default_factory=AnimationSettings)\n\n    def to_dict(self) -> Dict[str, Any]:\n        \"\"\"Convert the profile to a dictionary.\"\"\"\n        data = asdict(self)\n        data[\"visual\"][\"visual_noise\"] = self.visual.visual_noise.value\n        data[\"animation\"][\"speed\"] = self.animation.speed.value\n        return data\n\n    @classmethod\n    def from_dict(cls, data: Dict[str, Any]) -> \"SensoryProfile\":\n        \"\"\"Create a profile from a dictionary.\"\"\"\n        visual_data = data.get(\"visual\", {})\n        audio_data = data.get(\"audio\", {})\n        animation_data = data.get(\"animation\", {})\n\n        profile = cls(\n            name=data[\"name\"],\n            description=data.get(\"description\", \"\"),\n            visual=VisualSettings(**visual_data),\n            audio=AudioSettings(**audio_data),\n            animation=AnimationSettings(**animation_data),\n        )\n\n        # Handle enums\n        if \"visual_noise\" in visual_data:\n            profile.visual.visual_noise = VisualNoiseLevel(visual_data[\"visual_noise\"])\n        if \"speed\" in animation_data:\n            profile.animation.speed = AnimationSpeed(animation_data[\"speed\"])\n\n        return profile\n\n    def save(self, path: Path):\n        \"\"\"Save the profile to a file.\"\"\"\n        with open(path, \"w\") as f:\n            json.dump(self.to_dict(), f, indent=2)\n\n    @classmethod\n    def load(cls, path: Path) -> \"SensoryProfile\":\n        \"\"\"Load a profile from a file.\"\"\"\n        with open(path, \"r\") as f:\n            data = json.load(f)\n        return cls.from_dict(data)\n\n\nclass ProfileManager:\n    \"\"\"Manages loading and saving of sensory profiles.\"\"\"\n\n    def __init__(self, profiles_dir: Optional[Path] = None):\n        \"\"\"Initialize with optional custom profiles directory.\"\"\"\n        if profiles_dir is None:\n            self.profiles_dir = Path.home() / \".hypercode\" / \"profiles\"\n        else:\n            self.profiles_dir = profiles_dir\n\n        self.profiles_dir.mkdir(parents=True, exist_ok=True)\n        self._ensure_default_profiles()\n\n    def _ensure_default_profiles(self):\n        \"\"\"Ensure default profiles exist.\"\"\"\n        default_profiles = [\n            self._create_minimal_profile(),\n            self._create_enhanced_profile(),\n            self._create_high_contrast_profile(),\n        ]\n\n        for profile in default_profiles:\n            path = self.profiles_dir / f\"{profile.name.lower().replace(' ', '_')}.json\"\n            if not path.exists():\n                profile.save(path)\n\n    def _create_minimal_profile(self) -> SensoryProfile:\n        \"\"\"Create a minimal distraction-free profile.\"\"\"\n        return SensoryProfile(\n            name=\"Minimal\",\n            description=\"A distraction-free profile with minimal visual noise and animations.\",\n            visual=VisualSettings(\n                theme=\"monochrome\",\n                font_family=\"Courier New\",\n                font_size=14,\n                visual_noise=VisualNoiseLevel.NONE,\n                show_minimap=False,\n                show_gutter_icons=False,\n            ),\n            audio=AudioSettings(enabled=False, volume=0.0),\n            animation=AnimationSettings(enabled=False, cursor_style=\"block\"),\n        )\n\n    def _create_enhanced_profile(self) -> SensoryProfile:\n        \"\"\"Create an enhanced profile with helpful visual cues.\"\"\"\n        return SensoryProfile(\n            name=\"Enhanced\",\n            description=\"A balanced profile with helpful visual cues and moderate animations.\",\n            visual=VisualSettings(\n                theme=\"solarized-light\",\n                font_family=\"Fira Code\",\n                font_size=15,\n                line_height=1.6,\n                visual_noise=VisualNoiseLevel.LOW,\n                show_minimap=True,\n            ),\n            audio=AudioSettings(\n                enabled=True,\n                volume=0.5,\n                sound_effects={\n                    \"error\": \"soft_chime\",\n                    \"completion\": \"soft_click\",\n                    \"notification\": \"gentle_bell\",\n                },\n            ),\n            animation=AnimationSettings(\n                enabled=True, speed=AnimationSpeed.NORMAL, cursor_style=\"underline\"\n            ),\n        )\n\n    def _create_high_contrast_profile(self) -> SensoryProfile:\n        \"\"\"Create a high-contrast profile for better readability.\"\"\"\n        return SensoryProfile(\n            name=\"High Contrast\",\n            description=\"High contrast theme for better readability and reduced eye strain.\",\n            visual=VisualSettings(\n                theme=\"high-contrast\",\n                font_family=\"Consolas\",\n                font_size=16,\n                line_height=1.8,\n                visual_noise=VisualNoiseLevel.LOW,\n            ),\n            audio=AudioSettings(\n                enabled=True,\n                volume=0.7,\n                sound_effects={\n                    \"error\": \"distinct_chime\",\n                    \"completion\": \"soft_chime\",\n                    \"notification\": \"gentle_click\",\n                },\n            ),\n            animation=AnimationSettings(\n                enabled=True, speed=AnimationSpeed.SLOW, cursor_style=\"block\"\n            ),\n        )\n\n    def list_profiles(self) -> List[str]:\n        \"\"\"List all available profile names.\"\"\"\n        return [p.stem for p in self.profiles_dir.glob(\"*.json\")]\n\n    def get_profile(self, name: str) -> Optional[SensoryProfile]:\n        \"\"\"Get a profile by name.\"\"\"\n        path = self.profiles_dir / f\"{name}.json\"\n        if path.exists():\n            return SensoryProfile.load(path)\n        return None\n\n    def save_profile(self, profile: SensoryProfile):\n        \"\"\"Save a profile.\"\"\"\n        path = self.profiles_dir / f\"{profile.name.lower().replace(' ', '_')}.json\"\n        profile.save(path)\n\n    def delete_profile(self, name: str):\n        \"\"\"Delete a profile by name.\"\"\"\n        path = self.profiles_dir / f\"{name}.json\"\n        if path.exists():\n            path.unlink()\n\n\n# Default profile manager instance\nprofile_manager = ProfileManager()\n\n\ndef get_profile(name: str) -> Optional[SensoryProfile]:\n    \"\"\"Helper function to get a profile by name.\"\"\"\n    return profile_manager.get_profile(name)\n\n\ndef list_profiles() -> List[str]:\n    \"\"\"Helper function to list all available profiles.\"\"\"\n    return profile_manager.list_profiles()\n",
  "metadata": {},
  "relative_path": "hypercode\\src\\hypercode\\core\\sensory_profile.py",
  "id": "aa9e41bb37ed1c517ab19ff84b926464"
}