{
  "file_name": "import-helper.py",
  "file_path": "C:\\Users\\lyndz\\Downloads\\hypercode PROJECT\\hypercode\\hypercode\\src\\utils\\import-helper.py",
  "file_size": 11127,
  "created": "2025-11-26T23:37:35.697206",
  "modified": "2025-11-26T23:37:35.697206",
  "file_type": "code",
  "content_hash": "a9ea3d51ca727e7c9df7aebf5ed4765b",
  "content_type": "text",
  "content": "#!/usr/bin/env python3\n\"\"\"\nHyperCode Perplexity Space Import Helper\nStreamlines the process of converting your Perplexity Space data into the HyperCode knowledge base\n\"\"\"\n\nimport json\nimport sys\nfrom pathlib import Path\nfrom typing import Dict, List\n\n\nclass SpaceImportHelper:\n    \"\"\"Helper class for managing Perplexity Space imports\"\"\"\n\n    def __init__(self, output_dir: str = \"data\"):\n        self.output_dir = Path(output_dir)\n        self.output_dir.mkdir(exist_ok=True)\n        self.documents: List[Dict] = []\n\n    def validate_document(self, doc: Dict) -> tuple[bool, str]:\n        \"\"\"\n        Validate a document structure\n        Returns (is_valid, error_message)\n        \"\"\"\n        required_fields = [\"title\", \"content\", \"tags\"]\n        optional_fields = [\"url\"]\n\n        # Check required fields\n        for field in required_fields:\n            if field not in doc:\n                return False, f\"Missing required field: {field}\"\n            if not doc[field]:\n                return False, f\"Empty required field: {field}\"\n\n        # Validate title\n        if not isinstance(doc[\"title\"], str) or len(doc[\"title\"]) < 3:\n            return False, \"Title must be a non-empty string (min 3 chars)\"\n\n        # Validate content\n        if not isinstance(doc[\"content\"], str) or len(doc[\"content\"]) < 10:\n            return False, \"Content must be a meaningful string (min 10 chars)\"\n\n        # Validate tags\n        if not isinstance(doc[\"tags\"], list):\n            return False, \"Tags must be a list\"\n        if len(doc[\"tags\"]) < 1 or len(doc[\"tags\"]) > 10:\n            return False, \"Tags should be 1-10 items\"\n\n        for tag in doc[\"tags\"]:\n            if not isinstance(tag, str):\n                return False, \"All tags must be strings\"\n            if not tag.islower() or \" \" in tag:\n                return False, f\"Tag '{tag}' must be lowercase with hyphens (not spaces)\"\n\n        # Validate URL (optional)\n        if \"url\" in doc and doc[\"url\"] is not None:\n            if not isinstance(doc[\"url\"], str):\n                return False, \"URL must be a string or null\"\n\n        return True, \"\"\n\n    def load_template(self, filepath: str) -> bool:\n        \"\"\"Load documents from JSON template file\"\"\"\n        try:\n            with open(filepath, \"r\", encoding=\"utf-8\") as f:\n                data = json.load(f)\n\n            if \"documents\" not in data:\n                print(\"‚ùå Error: JSON must contain 'documents' key\")\n                return False\n\n            self.documents = data[\"documents\"]\n            print(f\"‚úÖ Loaded {len(self.documents)} documents from template\")\n            return True\n        except json.JSONDecodeError as e:\n            print(f\"‚ùå JSON Parse Error: {e}\")\n            return False\n        except FileNotFoundError:\n            print(f\"‚ùå File not found: {filepath}\")\n            return False\n\n    def validate_all(self) -> tuple[bool, List[str]]:\n        \"\"\"Validate all loaded documents\"\"\"\n        errors = []\n        for i, doc in enumerate(self.documents):\n            is_valid, error = self.validate_document(doc)\n            if not is_valid:\n                errors.append(\n                    f\"Document {i} ('{doc.get('title', 'UNKNOWN')}'): {error}\"\n                )\n\n        return len(errors) == 0, errors\n\n    def generate_report(self) -> str:\n        \"\"\"Generate a validation report\"\"\"\n        report = [\n            \"\\n\" + \"=\" * 60,\n            \"üîç HyperCode Space Import Validation Report\",\n            \"=\" * 60,\n            \"\\nüìä Statistics:\",\n            f\"   ‚Ä¢ Total Documents: {len(self.documents)}\",\n        ]\n\n        # Calculate stats\n        total_content = sum(len(doc.get(\"content\", \"\")) for doc in self.documents)\n        all_tags = set()\n        urls_count = sum(1 for doc in self.documents if doc.get(\"url\"))\n\n        for doc in self.documents:\n            all_tags.update(doc.get(\"tags\", []))\n\n        report.extend(\n            [\n                f\"   ‚Ä¢ Total Tags: {len(all_tags)}\",\n                f\"   ‚Ä¢ Documents with URLs: {urls_count}\",\n                f\"   ‚Ä¢ Total Content Size: {total_content:,} characters\",\n            ]\n        )\n\n        # Tag breakdown\n        report.append(\"\\nüè∑Ô∏è  Tags Used:\")\n        tag_list = sorted(all_tags)\n        for tag in tag_list:\n            count = sum(1 for doc in self.documents if tag in doc.get(\"tags\", []))\n            report.append(f\"   ‚Ä¢ {tag}: {count} document(s)\")\n\n        # Document list\n        report.append(\"\\nüìã Documents:\")\n        for i, doc in enumerate(self.documents, 1):\n            tags = \", \".join(doc.get(\"tags\", []))\n            report.append(f\"   {i}. {doc.get('title', 'UNTITLED')}\")\n            report.append(f\"      Tags: {tags}\")\n            report.append(f\"      Size: {len(doc.get('content', '')):,} chars\")\n            if doc.get(\"url\"):\n                report.append(f\"      URL: {doc['url']}\")\n\n        report.append(\"\\n\" + \"=\" * 60 + \"\\n\")\n        return \"\\n\".join(report)\n\n    def create_import_script(self, output_file: str) -> bool:\n        \"\"\"Generate a Python script to import the data\"\"\"\n        script = '''#!/usr/bin/env python3\n\"\"\"Auto-generated HyperCode Space import script\"\"\"\n\nimport json\nfrom pathlib import Path\n\ndef import_space_data():\n    \"\"\"Import Perplexity Space data into HyperCode knowledge base\"\"\"\n\n    # Load the template\n    template_file = Path(\"perplexity_space_import_template.json\")\n    with open(template_file, \"r\", encoding=\"utf-8\") as f:\n        data = json.load(f)\n\n    # Initialize knowledge base\n    kb_file = Path(\"data/hypercode_knowledge_base.json\")\n    if kb_file.exists():\n        with open(kb_file, \"r\", encoding=\"utf-8\") as f:\n            kb = json.load(f)\n    else:\n        kb = {\"documents\": [], \"imported_at\": []}\n\n    # Add new documents\n    print(f\"üì• Importing {len(data['documents'])} documents...\")\n\n    for doc in data['documents']:\n        kb[\"documents\"].append(doc)\n        print(f\"   ‚úÖ {doc['title']}\")\n\n    # Save updated knowledge base\n    kb_file.parent.mkdir(exist_ok=True)\n    with open(kb_file, \"w\", encoding=\"utf-8\") as f:\n        json.dump(kb, f, indent=2, ensure_ascii=False)\n\n    print(f\"\\\\nüéâ Import complete! {len(kb['documents'])} documents in knowledge base\")\n    return True\n\nif __name__ == \"__main__\":\n    import_space_data()\n'''\n\n        try:\n            with open(output_file, \"w\", encoding=\"utf-8\") as f:\n                f.write(script)\n            print(f\"‚úÖ Generated import script: {output_file}\")\n            return True\n        except Exception as e:\n            print(f\"‚ùå Failed to create script: {e}\")\n            return False\n\n    def create_template_instructions(self, output_file: str) -> bool:\n        \"\"\"Generate detailed instructions for filling the template\"\"\"\n        instructions = \"\"\"# üìù How to Fill the Import Template\n\n## Quick Start\n\n1. Open `perplexity_space_import_template.json` in your text editor\n2. Replace the example documents with your actual Perplexity Space data\n3. For each document, fill:\n   - **title**: Clear, descriptive name (e.g., \"HyperCode Language Specification v1.0.0\")\n   - **content**: The actual research/findings (copy-paste from your Space)\n   - **tags**: 1-5 relevant tags (lowercase, hyphen-separated)\n   - **url**: Link to the Perplexity Space (or null if not available)\n\n## Template Structure\n\n```json\n{\n  \"documents\": [\n    {\n      \"title\": \"Your Document Title\",\n      \"content\": \"Full content here...\",\n      \"url\": \"https://perplexity.ai/...\",\n      \"tags\": [\"tag1\", \"tag2\", \"tag3\"]\n    }\n  ]\n}\n```\n\n## Recommended Tags\n\n- **Core**: core-language, specification, syntax, grammar\n- **Features**: spatial-programming, natural-language, accessibility, neurodivergent\n- **Backend**: quantum, dna-computing, gpu, fpga, neuromorphic\n- **AI**: ai-integration, gpt, claude, mistral, llm-compatibility\n- **Implementation**: roadmap, architecture, phases, development\n- **Research**: research, findings, analysis, proof-of-concept\n- **Community**: community, open-source, contributions, collaboration\n\n## Common Mistakes to Avoid\n\n1. ‚ùå Tags with spaces: \"natural language\" ‚Üí ‚úÖ \"natural-language\"\n2. ‚ùå UPPERCASE tags: \"AI\" ‚Üí ‚úÖ \"ai\"\n3. ‚ùå Too many tags: [tag1, tag2, tag3, tag4, tag5, tag6] ‚Üí ‚úÖ Max 5\n4. ‚ùå Empty content ‚Üí Always include meaningful content\n5. ‚ùå Duplicate documents ‚Üí Check for duplicates before import\n\n## Validation\n\nRun this to check your template:\n\n```bash\npython3 -c \"import json; json.load(open('perplexity_space_import_template.json'))\" && echo \"‚úÖ Valid!\"\n```\n\n## Need Help?\n\nIf a document doesn't validate, the import helper will tell you exactly what's wrong.\nCheck the error message and fix accordingly.\n\"\"\"\n\n        try:\n            with open(output_file, \"w\", encoding=\"utf-8\") as f:\n                f.write(instructions)\n            print(f\"‚úÖ Generated instructions: {output_file}\")\n            return True\n        except Exception as e:\n            print(f\"‚ùå Failed to create instructions: {e}\")\n            return False\n\n\ndef main():\n    \"\"\"CLI interface for the import helper\"\"\"\n\n    if len(sys.argv) < 2:\n        print(\n            \"\"\"\nüöÄ HyperCode Perplexity Space Import Helper\n\nUsage:\n  python import_helper.py validate <template.json>     # Validate template\n  python import_helper.py report <template.json>       # Generate report\n  python import_helper.py generate-script              # Create import script\n  python import_helper.py generate-instructions        # Create instruction guide\n        \"\"\"\n        )\n        return\n\n    helper = SpaceImportHelper()\n    command = sys.argv[1]\n\n    if command == \"validate\":\n        if len(sys.argv) < 3:\n            print(\"‚ùå Please specify template file\")\n            return\n\n        if helper.load_template(sys.argv[2]):\n            is_valid, errors = helper.validate_all()\n            if is_valid:\n                print(\"‚úÖ Template is valid and ready for import!\")\n            else:\n                print(\"‚ùå Validation errors found:\")\n                for error in errors:\n                    print(f\"   ‚Ä¢ {error}\")\n\n    elif command == \"report\":\n        if len(sys.argv) < 3:\n            print(\"‚ùå Please specify template file\")\n            return\n\n        if helper.load_template(sys.argv[2]):\n            is_valid, errors = helper.validate_all()\n            print(helper.generate_report())\n            if not is_valid:\n                print(\"‚ö†Ô∏è  Validation errors:\")\n                for error in errors:\n                    print(f\"   ‚Ä¢ {error}\")\n\n    elif command == \"generate-script\":\n        helper.create_import_script(\"import_space.py\")\n\n    elif command == \"generate-instructions\":\n        helper.create_template_instructions(\"FILL_TEMPLATE_GUIDE.md\")\n\n    else:\n        print(f\"‚ùå Unknown command: {command}\")\n\n\nif __name__ == \"__main__\":\n    main()\n",
  "metadata": {},
  "relative_path": "hypercode\\src\\utils\\import-helper.py",
  "id": "57bdd53fe0b9087bf63386599e0ff066"
}