{
  "file_name": "z_d320893e04ce495b_knowledge_base_py.html",
  "file_path": "C:\\Users\\lyndz\\Downloads\\hypercode PROJECT\\hypercode\\htmlcov\\z_d320893e04ce495b_knowledge_base_py.html",
  "file_size": 155971,
  "created": "2025-12-04T11:42:46.513406",
  "modified": "2025-12-04T11:42:46.520473",
  "file_type": "code",
  "content_hash": "e7b4e985027323c47bf67d1684219ddf",
  "content_type": "text",
  "content": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n    <title>Coverage for hypercode\\src\\hypercode\\knowledge_base.py: 0%</title>\n    <link rel=\"icon\" sizes=\"32x32\" href=\"favicon_32_cb_58284776.png\">\n    <link rel=\"stylesheet\" href=\"style_cb_e87a9960.css\" type=\"text/css\">\n    <script src=\"coverage_html_cb_437fc316.js\" defer></script>\n</head>\n<body class=\"pyfile\">\n<header>\n    <div class=\"content\">\n        <h1>\n            <span class=\"text\">Coverage for </span><b>hypercode\\src\\hypercode\\knowledge_base.py</b>:\n            <span class=\"pc_cov\">0%</span>\n        </h1>\n        <aside id=\"help_panel_wrapper\">\n            <input id=\"help_panel_state\" type=\"checkbox\">\n            <label for=\"help_panel_state\">\n                <img id=\"keyboard_icon\" src=\"keybd_closed_cb_ce680311.png\" alt=\"Show/hide keyboard shortcuts\">\n            </label>\n            <div id=\"help_panel\">\n                <p class=\"legend\">Shortcuts on this page</p>\n                <div class=\"keyhelp\">\n                    <p>\n                        <kbd>r</kbd>\n                        <kbd>m</kbd>\n                        <kbd>x</kbd>\n                        &nbsp; toggle line displays\n                    </p>\n                    <p>\n                        <kbd>j</kbd>\n                        <kbd>k</kbd>\n                        &nbsp; next/prev highlighted chunk\n                    </p>\n                    <p>\n                        <kbd>0</kbd> &nbsp; (zero) top of page\n                    </p>\n                    <p>\n                        <kbd>1</kbd> &nbsp; (one) first highlighted chunk\n                    </p>\n                    <p>\n                        <kbd>[</kbd>\n                        <kbd>]</kbd>\n                        &nbsp; prev/next file\n                    </p>\n                    <p>\n                        <kbd>u</kbd> &nbsp; up to the index\n                    </p>\n                    <p>\n                        <kbd>?</kbd> &nbsp; show/hide this help\n                    </p>\n                </div>\n            </div>\n        </aside>\n        <h2>\n            <span class=\"text\">220 statements &nbsp;</span>\n            <button type=\"button\" class=\"run button_toggle_run\" value=\"run\" data-shortcut=\"r\" title=\"Toggle lines run\">0<span class=\"text\"> run</span></button>\n            <button type=\"button\" class=\"mis show_mis button_toggle_mis\" value=\"mis\" data-shortcut=\"m\" title=\"Toggle lines missing\">220<span class=\"text\"> missing</span></button>\n            <button type=\"button\" class=\"exc show_exc button_toggle_exc\" value=\"exc\" data-shortcut=\"x\" title=\"Toggle lines excluded\">9<span class=\"text\"> excluded</span></button>\n        </h2>\n        <p class=\"text\">\n            <a id=\"prevFileLink\" class=\"nav\" href=\"z_d320893e04ce495b_enhanced_perplexity_client_py.html\">&#xab; prev</a> &nbsp; &nbsp;\n            <a id=\"indexLink\" class=\"nav\" href=\"index.html\">&Hat; index</a> &nbsp; &nbsp;\n            <a id=\"nextFileLink\" class=\"nav\" href=\"z_d320893e04ce495b_perplexity_client_py.html\">&#xbb; next</a>\n            &nbsp; &nbsp; &nbsp;\n            <a class=\"nav\" href=\"https://coverage.readthedocs.io/en/7.11.3\">coverage.py v7.11.3</a>,\n            created at 2025-12-04 11:42 +0000\n        </p>\n        <aside class=\"hidden\">\n            <button type=\"button\" class=\"button_next_chunk\" data-shortcut=\"j\"></button>\n            <button type=\"button\" class=\"button_prev_chunk\" data-shortcut=\"k\"></button>\n            <button type=\"button\" class=\"button_top_of_page\" data-shortcut=\"0\"></button>\n            <button type=\"button\" class=\"button_first_chunk\" data-shortcut=\"1\"></button>\n            <button type=\"button\" class=\"button_prev_file\" data-shortcut=\"[\"></button>\n            <button type=\"button\" class=\"button_next_file\" data-shortcut=\"]\"></button>\n            <button type=\"button\" class=\"button_to_index\" data-shortcut=\"u\"></button>\n            <button type=\"button\" class=\"button_show_hide_help\" data-shortcut=\"?\"></button>\n        </aside>\n    </div>\n</header>\n<main id=\"source\">\n    <p class=\"pln\"><span class=\"n\"><a id=\"t1\" href=\"#t1\">1</a></span><span class=\"t\"><span class=\"com\">#!/usr/bin/env python3</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t2\" href=\"#t2\">2</a></span><span class=\"t\"><span class=\"str\">\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t3\" href=\"#t3\">3</a></span><span class=\"t\"><span class=\"str\">HyperCode Knowledge Base - Perplexity Space Integration</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t4\" href=\"#t4\">4</a></span><span class=\"t\"><span class=\"str\">Manages research data from Perplexity Space for API context</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t5\" href=\"#t5\">5</a></span><span class=\"t\"><span class=\"str\">\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t6\" href=\"#t6\">6</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t7\" href=\"#t7\">7</a></span><span class=\"t\"><span class=\"key\">import</span> <span class=\"nam\">hashlib</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t8\" href=\"#t8\">8</a></span><span class=\"t\"><span class=\"key\">import</span> <span class=\"nam\">json</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t9\" href=\"#t9\">9</a></span><span class=\"t\"><span class=\"key\">from</span> <span class=\"nam\">collections</span> <span class=\"key\">import</span> <span class=\"nam\">defaultdict</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t10\" href=\"#t10\">10</a></span><span class=\"t\"><span class=\"key\">from</span> <span class=\"nam\">dataclasses</span> <span class=\"key\">import</span> <span class=\"nam\">asdict</span><span class=\"op\">,</span> <span class=\"nam\">dataclass</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t11\" href=\"#t11\">11</a></span><span class=\"t\"><span class=\"key\">from</span> <span class=\"nam\">datetime</span> <span class=\"key\">import</span> <span class=\"nam\">datetime</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t12\" href=\"#t12\">12</a></span><span class=\"t\"><span class=\"key\">from</span> <span class=\"nam\">pathlib</span> <span class=\"key\">import</span> <span class=\"nam\">Path</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t13\" href=\"#t13\">13</a></span><span class=\"t\"><span class=\"key\">from</span> <span class=\"nam\">typing</span> <span class=\"key\">import</span> <span class=\"nam\">Any</span><span class=\"op\">,</span> <span class=\"nam\">Dict</span><span class=\"op\">,</span> <span class=\"nam\">List</span><span class=\"op\">,</span> <span class=\"nam\">Optional</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t14\" href=\"#t14\">14</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t15\" href=\"#t15\">15</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t16\" href=\"#t16\">16</a></span><span class=\"t\"><span class=\"op\">@</span><span class=\"nam\">dataclass</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t17\" href=\"#t17\">17</a></span><span class=\"t\"><span class=\"key\">class</span> <span class=\"nam\">ResearchDocument</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t18\" href=\"#t18\">18</a></span><span class=\"t\">    <span class=\"str\">\"\"\"Represents a research document from Perplexity Space\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t19\" href=\"#t19\">19</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t20\" href=\"#t20\">20</a></span><span class=\"t\">    <span class=\"nam\">id</span><span class=\"op\">:</span> <span class=\"nam\">str</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t21\" href=\"#t21\">21</a></span><span class=\"t\">    <span class=\"nam\">title</span><span class=\"op\">:</span> <span class=\"nam\">str</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t22\" href=\"#t22\">22</a></span><span class=\"t\">    <span class=\"nam\">content</span><span class=\"op\">:</span> <span class=\"nam\">str</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t23\" href=\"#t23\">23</a></span><span class=\"t\">    <span class=\"nam\">url</span><span class=\"op\">:</span> <span class=\"nam\">Optional</span><span class=\"op\">[</span><span class=\"nam\">str</span><span class=\"op\">]</span> <span class=\"op\">=</span> <span class=\"key\">None</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t24\" href=\"#t24\">24</a></span><span class=\"t\">    <span class=\"nam\">tags</span><span class=\"op\">:</span> <span class=\"nam\">List</span><span class=\"op\">[</span><span class=\"nam\">str</span><span class=\"op\">]</span> <span class=\"op\">=</span> <span class=\"key\">None</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t25\" href=\"#t25\">25</a></span><span class=\"t\">    <span class=\"nam\">created_at</span><span class=\"op\">:</span> <span class=\"nam\">str</span> <span class=\"op\">=</span> <span class=\"key\">None</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t26\" href=\"#t26\">26</a></span><span class=\"t\">    <span class=\"nam\">last_updated</span><span class=\"op\">:</span> <span class=\"nam\">str</span> <span class=\"op\">=</span> <span class=\"key\">None</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t27\" href=\"#t27\">27</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t28\" href=\"#t28\">28</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">__post_init__</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t29\" href=\"#t29\">29</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">tags</span> <span class=\"key\">is</span> <span class=\"key\">None</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t30\" href=\"#t30\">30</a></span><span class=\"t\">            <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">tags</span> <span class=\"op\">=</span> <span class=\"op\">[</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t31\" href=\"#t31\">31</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">created_at</span> <span class=\"key\">is</span> <span class=\"key\">None</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t32\" href=\"#t32\">32</a></span><span class=\"t\">            <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">created_at</span> <span class=\"op\">=</span> <span class=\"nam\">datetime</span><span class=\"op\">.</span><span class=\"nam\">now</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">.</span><span class=\"nam\">isoformat</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t33\" href=\"#t33\">33</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">last_updated</span> <span class=\"key\">is</span> <span class=\"key\">None</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t34\" href=\"#t34\">34</a></span><span class=\"t\">            <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">last_updated</span> <span class=\"op\">=</span> <span class=\"nam\">datetime</span><span class=\"op\">.</span><span class=\"nam\">now</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">.</span><span class=\"nam\">isoformat</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t35\" href=\"#t35\">35</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t36\" href=\"#t36\">36</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">generate_id</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">)</span> <span class=\"op\">-></span> <span class=\"nam\">str</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t37\" href=\"#t37\">37</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Generate unique ID from content hash\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t38\" href=\"#t38\">38</a></span><span class=\"t\">        <span class=\"nam\">content_hash</span> <span class=\"op\">=</span> <span class=\"nam\">hashlib</span><span class=\"op\">.</span><span class=\"nam\">md5</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">content</span><span class=\"op\">.</span><span class=\"nam\">encode</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">)</span><span class=\"op\">.</span><span class=\"nam\">hexdigest</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">[</span><span class=\"op\">:</span><span class=\"num\">8</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t39\" href=\"#t39\">39</a></span><span class=\"t\">        <span class=\"key\">return</span> <span class=\"fst\">f\"</span><span class=\"fst\">doc_</span><span class=\"op\">{</span><span class=\"nam\">content_hash</span><span class=\"op\">}</span><span class=\"fst\">\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t40\" href=\"#t40\">40</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t41\" href=\"#t41\">41</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">validate</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">)</span> <span class=\"op\">-></span> <span class=\"nam\">bool</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t42\" href=\"#t42\">42</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Validate document data\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t43\" href=\"#t43\">43</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"key\">not</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">title</span> <span class=\"key\">or</span> <span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">title</span><span class=\"op\">.</span><span class=\"nam\">strip</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">)</span> <span class=\"op\">==</span> <span class=\"num\">0</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t44\" href=\"#t44\">44</a></span><span class=\"t\">            <span class=\"key\">raise</span> <span class=\"nam\">ValueError</span><span class=\"op\">(</span><span class=\"str\">\"Document title cannot be empty\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t45\" href=\"#t45\">45</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"key\">not</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">content</span> <span class=\"key\">or</span> <span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">content</span><span class=\"op\">.</span><span class=\"nam\">strip</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">)</span> <span class=\"op\">==</span> <span class=\"num\">0</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t46\" href=\"#t46\">46</a></span><span class=\"t\">            <span class=\"key\">raise</span> <span class=\"nam\">ValueError</span><span class=\"op\">(</span><span class=\"str\">\"Document content cannot be empty\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t47\" href=\"#t47\">47</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">title</span><span class=\"op\">)</span> <span class=\"op\">></span> <span class=\"num\">1000</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t48\" href=\"#t48\">48</a></span><span class=\"t\">            <span class=\"key\">raise</span> <span class=\"nam\">ValueError</span><span class=\"op\">(</span><span class=\"str\">\"Title too long (max 1000 characters)\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t49\" href=\"#t49\">49</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">content</span><span class=\"op\">)</span> <span class=\"op\">></span> <span class=\"num\">1000000</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t50\" href=\"#t50\">50</a></span><span class=\"t\">            <span class=\"key\">raise</span> <span class=\"nam\">ValueError</span><span class=\"op\">(</span><span class=\"str\">\"Content too long (max 1MB)\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t51\" href=\"#t51\">51</a></span><span class=\"t\">        <span class=\"key\">return</span> <span class=\"key\">True</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t52\" href=\"#t52\">52</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t53\" href=\"#t53\">53</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">update_timestamp</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t54\" href=\"#t54\">54</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Update the last_updated timestamp\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t55\" href=\"#t55\">55</a></span><span class=\"t\">        <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">last_updated</span> <span class=\"op\">=</span> <span class=\"nam\">datetime</span><span class=\"op\">.</span><span class=\"nam\">now</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">.</span><span class=\"nam\">isoformat</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t56\" href=\"#t56\">56</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"nam\">hasattr</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">,</span> <span class=\"str\">\"version\"</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t57\" href=\"#t57\">57</a></span><span class=\"t\">            <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">version</span> <span class=\"op\">+=</span> <span class=\"num\">1</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t58\" href=\"#t58\">58</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t59\" href=\"#t59\">59</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t60\" href=\"#t60\">60</a></span><span class=\"t\"><span class=\"com\"># Related terms dictionary for search expansion</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t61\" href=\"#t61\">61</a></span><span class=\"t\"><span class=\"nam\">RELATED_TERMS</span> <span class=\"op\">=</span> <span class=\"op\">{</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t62\" href=\"#t62\">62</a></span><span class=\"t\">    <span class=\"str\">\"pillar\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"pillars\"</span><span class=\"op\">,</span> <span class=\"str\">\"column\"</span><span class=\"op\">,</span> <span class=\"str\">\"foundation\"</span><span class=\"op\">,</span> <span class=\"str\">\"core\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t63\" href=\"#t63\">63</a></span><span class=\"t\">    <span class=\"str\">\"pillars\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"pillar\"</span><span class=\"op\">,</span> <span class=\"str\">\"column\"</span><span class=\"op\">,</span> <span class=\"str\">\"foundation\"</span><span class=\"op\">,</span> <span class=\"str\">\"core\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t64\" href=\"#t64\">64</a></span><span class=\"t\">    <span class=\"str\">\"audit\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"auditing\"</span><span class=\"op\">,</span> <span class=\"str\">\"checklist\"</span><span class=\"op\">,</span> <span class=\"str\">\"review\"</span><span class=\"op\">,</span> <span class=\"str\">\"assessment\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t65\" href=\"#t65\">65</a></span><span class=\"t\">    <span class=\"str\">\"auditing\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"audit\"</span><span class=\"op\">,</span> <span class=\"str\">\"checklist\"</span><span class=\"op\">,</span> <span class=\"str\">\"review\"</span><span class=\"op\">,</span> <span class=\"str\">\"assessment\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t66\" href=\"#t66\">66</a></span><span class=\"t\">    <span class=\"str\">\"phase\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"phases\"</span><span class=\"op\">,</span> <span class=\"str\">\"stage\"</span><span class=\"op\">,</span> <span class=\"str\">\"step\"</span><span class=\"op\">,</span> <span class=\"str\">\"milestone\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t67\" href=\"#t67\">67</a></span><span class=\"t\">    <span class=\"str\">\"phases\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"phase\"</span><span class=\"op\">,</span> <span class=\"str\">\"stage\"</span><span class=\"op\">,</span> <span class=\"str\">\"step\"</span><span class=\"op\">,</span> <span class=\"str\">\"milestone\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t68\" href=\"#t68\">68</a></span><span class=\"t\">    <span class=\"str\">\"neurodiversity\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"neurodivergent\"</span><span class=\"op\">,</span> <span class=\"str\">\"adhd\"</span><span class=\"op\">,</span> <span class=\"str\">\"autism\"</span><span class=\"op\">,</span> <span class=\"str\">\"dyslexia\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t69\" href=\"#t69\">69</a></span><span class=\"t\">    <span class=\"str\">\"neurodivergent\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"neurodiversity\"</span><span class=\"op\">,</span> <span class=\"str\">\"adhd\"</span><span class=\"op\">,</span> <span class=\"str\">\"autism\"</span><span class=\"op\">,</span> <span class=\"str\">\"dyslexia\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t70\" href=\"#t70\">70</a></span><span class=\"t\">    <span class=\"str\">\"implementation\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"implement\"</span><span class=\"op\">,</span> <span class=\"str\">\"deploy\"</span><span class=\"op\">,</span> <span class=\"str\">\"execute\"</span><span class=\"op\">,</span> <span class=\"str\">\"build\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t71\" href=\"#t71\">71</a></span><span class=\"t\">    <span class=\"str\">\"implement\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"implementation\"</span><span class=\"op\">,</span> <span class=\"str\">\"deploy\"</span><span class=\"op\">,</span> <span class=\"str\">\"execute\"</span><span class=\"op\">,</span> <span class=\"str\">\"build\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t72\" href=\"#t72\">72</a></span><span class=\"t\">    <span class=\"str\">\"metadata\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"space\"</span><span class=\"op\">,</span> <span class=\"str\">\"author\"</span><span class=\"op\">,</span> <span class=\"str\">\"creator\"</span><span class=\"op\">,</span> <span class=\"str\">\"project\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t73\" href=\"#t73\">73</a></span><span class=\"t\">    <span class=\"str\">\"space\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"metadata\"</span><span class=\"op\">,</span> <span class=\"str\">\"author\"</span><span class=\"op\">,</span> <span class=\"str\">\"creator\"</span><span class=\"op\">,</span> <span class=\"str\">\"project\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t74\" href=\"#t74\">74</a></span><span class=\"t\">    <span class=\"str\">\"philosophy\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"principles\"</span><span class=\"op\">,</span> <span class=\"str\">\"ideas\"</span><span class=\"op\">,</span> <span class=\"str\">\"concepts\"</span><span class=\"op\">,</span> <span class=\"str\">\"beliefs\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t75\" href=\"#t75\">75</a></span><span class=\"t\">    <span class=\"str\">\"principles\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"philosophy\"</span><span class=\"op\">,</span> <span class=\"str\">\"ideas\"</span><span class=\"op\">,</span> <span class=\"str\">\"concepts\"</span><span class=\"op\">,</span> <span class=\"str\">\"beliefs\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t76\" href=\"#t76\">76</a></span><span class=\"t\">    <span class=\"str\">\"future\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"quantum\"</span><span class=\"op\">,</span> <span class=\"str\">\"dna\"</span><span class=\"op\">,</span> <span class=\"str\">\"ai\"</span><span class=\"op\">,</span> <span class=\"str\">\"technologies\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t77\" href=\"#t77\">77</a></span><span class=\"t\">    <span class=\"str\">\"quantum\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"future\"</span><span class=\"op\">,</span> <span class=\"str\">\"dna\"</span><span class=\"op\">,</span> <span class=\"str\">\"ai\"</span><span class=\"op\">,</span> <span class=\"str\">\"technologies\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t78\" href=\"#t78\">78</a></span><span class=\"t\">    <span class=\"str\">\"dna\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"future\"</span><span class=\"op\">,</span> <span class=\"str\">\"quantum\"</span><span class=\"op\">,</span> <span class=\"str\">\"ai\"</span><span class=\"op\">,</span> <span class=\"str\">\"technologies\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t79\" href=\"#t79\">79</a></span><span class=\"t\">    <span class=\"str\">\"ai\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"future\"</span><span class=\"op\">,</span> <span class=\"str\">\"quantum\"</span><span class=\"op\">,</span> <span class=\"str\">\"dna\"</span><span class=\"op\">,</span> <span class=\"str\">\"technologies\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t80\" href=\"#t80\">80</a></span><span class=\"t\">    <span class=\"str\">\"technologies\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"future\"</span><span class=\"op\">,</span> <span class=\"str\">\"quantum\"</span><span class=\"op\">,</span> <span class=\"str\">\"dna\"</span><span class=\"op\">,</span> <span class=\"str\">\"ai\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t81\" href=\"#t81\">81</a></span><span class=\"t\">    <span class=\"str\">\"message\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"core\"</span><span class=\"op\">,</span> <span class=\"str\">\"mission\"</span><span class=\"op\">,</span> <span class=\"str\">\"vision\"</span><span class=\"op\">,</span> <span class=\"str\">\"statement\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t82\" href=\"#t82\">82</a></span><span class=\"t\">    <span class=\"str\">\"core\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"message\"</span><span class=\"op\">,</span> <span class=\"str\">\"mission\"</span><span class=\"op\">,</span> <span class=\"str\">\"vision\"</span><span class=\"op\">,</span> <span class=\"str\">\"statement\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t83\" href=\"#t83\">83</a></span><span class=\"t\">    <span class=\"str\">\"technical\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"features\"</span><span class=\"op\">,</span> <span class=\"str\">\"specifications\"</span><span class=\"op\">,</span> <span class=\"str\">\"architecture\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t84\" href=\"#t84\">84</a></span><span class=\"t\">    <span class=\"str\">\"features\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"technical\"</span><span class=\"op\">,</span> <span class=\"str\">\"specifications\"</span><span class=\"op\">,</span> <span class=\"str\">\"architecture\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t85\" href=\"#t85\">85</a></span><span class=\"t\">    <span class=\"str\">\"research\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"methodology\"</span><span class=\"op\">,</span> <span class=\"str\">\"paper\"</span><span class=\"op\">,</span> <span class=\"str\">\"living\"</span><span class=\"op\">,</span> <span class=\"str\">\"study\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t86\" href=\"#t86\">86</a></span><span class=\"t\">    <span class=\"str\">\"methodology\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"research\"</span><span class=\"op\">,</span> <span class=\"str\">\"paper\"</span><span class=\"op\">,</span> <span class=\"str\">\"living\"</span><span class=\"op\">,</span> <span class=\"str\">\"study\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t87\" href=\"#t87\">87</a></span><span class=\"t\">    <span class=\"str\">\"community\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"collaboration\"</span><span class=\"op\">,</span> <span class=\"str\">\"open source\"</span><span class=\"op\">,</span> <span class=\"str\">\"contribution\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t88\" href=\"#t88\">88</a></span><span class=\"t\">    <span class=\"str\">\"collaboration\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"community\"</span><span class=\"op\">,</span> <span class=\"str\">\"open source\"</span><span class=\"op\">,</span> <span class=\"str\">\"contribution\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t89\" href=\"#t89\">89</a></span><span class=\"t\">    <span class=\"str\">\"roadmap\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"phases\"</span><span class=\"op\">,</span> <span class=\"str\">\"timeline\"</span><span class=\"op\">,</span> <span class=\"str\">\"milestones\"</span><span class=\"op\">,</span> <span class=\"str\">\"implementation\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t90\" href=\"#t90\">90</a></span><span class=\"t\">    <span class=\"str\">\"timeline\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"roadmap\"</span><span class=\"op\">,</span> <span class=\"str\">\"phases\"</span><span class=\"op\">,</span> <span class=\"str\">\"milestones\"</span><span class=\"op\">,</span> <span class=\"str\">\"implementation\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t91\" href=\"#t91\">91</a></span><span class=\"t\">    <span class=\"str\">\"impact\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"vision\"</span><span class=\"op\">,</span> <span class=\"str\">\"societal\"</span><span class=\"op\">,</span> <span class=\"str\">\"innovation\"</span><span class=\"op\">,</span> <span class=\"str\">\"long-term\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t92\" href=\"#t92\">92</a></span><span class=\"t\">    <span class=\"str\">\"vision\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"impact\"</span><span class=\"op\">,</span> <span class=\"str\">\"societal\"</span><span class=\"op\">,</span> <span class=\"str\">\"innovation\"</span><span class=\"op\">,</span> <span class=\"str\">\"long-term\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t93\" href=\"#t93\">93</a></span><span class=\"t\">    <span class=\"str\">\"resources\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"references\"</span><span class=\"op\">,</span> <span class=\"str\">\"historical\"</span><span class=\"op\">,</span> <span class=\"str\">\"languages\"</span><span class=\"op\">,</span> <span class=\"str\">\"brainfuck\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t94\" href=\"#t94\">94</a></span><span class=\"t\">    <span class=\"str\">\"references\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"resources\"</span><span class=\"op\">,</span> <span class=\"str\">\"historical\"</span><span class=\"op\">,</span> <span class=\"str\">\"languages\"</span><span class=\"op\">,</span> <span class=\"str\">\"brainfuck\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t95\" href=\"#t95\">95</a></span><span class=\"t\">    <span class=\"str\">\"action\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"call\"</span><span class=\"op\">,</span> <span class=\"str\">\"join\"</span><span class=\"op\">,</span> <span class=\"str\">\"contribute\"</span><span class=\"op\">,</span> <span class=\"str\">\"movement\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t96\" href=\"#t96\">96</a></span><span class=\"t\">    <span class=\"str\">\"call\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"action\"</span><span class=\"op\">,</span> <span class=\"str\">\"join\"</span><span class=\"op\">,</span> <span class=\"str\">\"contribute\"</span><span class=\"op\">,</span> <span class=\"str\">\"movement\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t97\" href=\"#t97\">97</a></span><span class=\"t\"><span class=\"op\">}</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t98\" href=\"#t98\">98</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t99\" href=\"#t99\">99</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t100\" href=\"#t100\">100</a></span><span class=\"t\"><span class=\"key\">class</span> <span class=\"nam\">HyperCodeKnowledgeBase</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t101\" href=\"#t101\">101</a></span><span class=\"t\">    <span class=\"str\">\"\"\"Knowledge base for HyperCode research data\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t102\" href=\"#t102\">102</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t103\" href=\"#t103\">103</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">__init__</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">,</span> <span class=\"nam\">kb_path</span><span class=\"op\">:</span> <span class=\"nam\">str</span> <span class=\"op\">=</span> <span class=\"str\">\"data/hypercode_knowledge_base.json\"</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t104\" href=\"#t104\">104</a></span><span class=\"t\">        <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">kb_path</span> <span class=\"op\">=</span> <span class=\"nam\">Path</span><span class=\"op\">(</span><span class=\"nam\">kb_path</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t105\" href=\"#t105\">105</a></span><span class=\"t\">        <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">kb_path</span><span class=\"op\">.</span><span class=\"nam\">parent</span><span class=\"op\">.</span><span class=\"nam\">mkdir</span><span class=\"op\">(</span><span class=\"nam\">exist_ok</span><span class=\"op\">=</span><span class=\"key\">True</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t106\" href=\"#t106\">106</a></span><span class=\"t\">        <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">:</span> <span class=\"nam\">Dict</span><span class=\"op\">[</span><span class=\"nam\">str</span><span class=\"op\">,</span> <span class=\"nam\">ResearchDocument</span><span class=\"op\">]</span> <span class=\"op\">=</span> <span class=\"op\">{</span><span class=\"op\">}</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t107\" href=\"#t107\">107</a></span><span class=\"t\">        <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">load</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t108\" href=\"#t108\">108</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t109\" href=\"#t109\">109</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">load</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t110\" href=\"#t110\">110</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Load knowledge base from file\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t111\" href=\"#t111\">111</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">kb_path</span><span class=\"op\">.</span><span class=\"nam\">exists</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t112\" href=\"#t112\">112</a></span><span class=\"t\">            <span class=\"key\">try</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t113\" href=\"#t113\">113</a></span><span class=\"t\">                <span class=\"key\">with</span> <span class=\"nam\">open</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">kb_path</span><span class=\"op\">,</span> <span class=\"str\">\"r\"</span><span class=\"op\">,</span> <span class=\"nam\">encoding</span><span class=\"op\">=</span><span class=\"str\">\"utf-8\"</span><span class=\"op\">)</span> <span class=\"key\">as</span> <span class=\"nam\">f</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t114\" href=\"#t114\">114</a></span><span class=\"t\">                    <span class=\"nam\">data</span> <span class=\"op\">=</span> <span class=\"nam\">json</span><span class=\"op\">.</span><span class=\"nam\">load</span><span class=\"op\">(</span><span class=\"nam\">f</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t115\" href=\"#t115\">115</a></span><span class=\"t\">                    <span class=\"key\">for</span> <span class=\"nam\">doc_id</span><span class=\"op\">,</span> <span class=\"nam\">doc_data</span> <span class=\"key\">in</span> <span class=\"nam\">data</span><span class=\"op\">.</span><span class=\"nam\">items</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t116\" href=\"#t116\">116</a></span><span class=\"t\">                        <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">[</span><span class=\"nam\">doc_id</span><span class=\"op\">]</span> <span class=\"op\">=</span> <span class=\"nam\">ResearchDocument</span><span class=\"op\">(</span><span class=\"op\">**</span><span class=\"nam\">doc_data</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t117\" href=\"#t117\">117</a></span><span class=\"t\">                <span class=\"nam\">print</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">&#9989; Loaded </span><span class=\"op\">{</span><span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">)</span><span class=\"op\">}</span><span class=\"fst\"> documents from knowledge base</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t118\" href=\"#t118\">118</a></span><span class=\"t\">            <span class=\"key\">except</span> <span class=\"nam\">Exception</span> <span class=\"key\">as</span> <span class=\"nam\">e</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t119\" href=\"#t119\">119</a></span><span class=\"t\">                <span class=\"nam\">print</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">&#9888;&#65039; Error loading knowledge base: </span><span class=\"op\">{</span><span class=\"nam\">str</span><span class=\"op\">(</span><span class=\"nam\">e</span><span class=\"op\">)</span><span class=\"op\">}</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t120\" href=\"#t120\">120</a></span><span class=\"t\">                <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span> <span class=\"op\">=</span> <span class=\"op\">{</span><span class=\"op\">}</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t121\" href=\"#t121\">121</a></span><span class=\"t\">        <span class=\"key\">else</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t122\" href=\"#t122\">122</a></span><span class=\"t\">            <span class=\"nam\">print</span><span class=\"op\">(</span><span class=\"str\">\"&#128221; Creating new knowledge base\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t123\" href=\"#t123\">123</a></span><span class=\"t\">            <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span> <span class=\"op\">=</span> <span class=\"op\">{</span><span class=\"op\">}</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t124\" href=\"#t124\">124</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t125\" href=\"#t125\">125</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">save</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t126\" href=\"#t126\">126</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Save knowledge base to file\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t127\" href=\"#t127\">127</a></span><span class=\"t\">        <span class=\"key\">try</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t128\" href=\"#t128\">128</a></span><span class=\"t\">            <span class=\"nam\">data</span> <span class=\"op\">=</span> <span class=\"op\">{</span><span class=\"nam\">doc_id</span><span class=\"op\">:</span> <span class=\"nam\">asdict</span><span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">)</span> <span class=\"key\">for</span> <span class=\"nam\">doc_id</span><span class=\"op\">,</span> <span class=\"nam\">doc</span> <span class=\"key\">in</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">.</span><span class=\"nam\">items</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">}</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t129\" href=\"#t129\">129</a></span><span class=\"t\">            <span class=\"key\">with</span> <span class=\"nam\">open</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">kb_path</span><span class=\"op\">,</span> <span class=\"str\">\"w\"</span><span class=\"op\">,</span> <span class=\"nam\">encoding</span><span class=\"op\">=</span><span class=\"str\">\"utf-8\"</span><span class=\"op\">)</span> <span class=\"key\">as</span> <span class=\"nam\">f</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t130\" href=\"#t130\">130</a></span><span class=\"t\">                <span class=\"nam\">json</span><span class=\"op\">.</span><span class=\"nam\">dump</span><span class=\"op\">(</span><span class=\"nam\">data</span><span class=\"op\">,</span> <span class=\"nam\">f</span><span class=\"op\">,</span> <span class=\"nam\">indent</span><span class=\"op\">=</span><span class=\"num\">2</span><span class=\"op\">,</span> <span class=\"nam\">ensure_ascii</span><span class=\"op\">=</span><span class=\"key\">False</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t131\" href=\"#t131\">131</a></span><span class=\"t\">            <span class=\"nam\">print</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">&#128190; Saved </span><span class=\"op\">{</span><span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">)</span><span class=\"op\">}</span><span class=\"fst\"> documents to knowledge base</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t132\" href=\"#t132\">132</a></span><span class=\"t\">        <span class=\"key\">except</span> <span class=\"nam\">Exception</span> <span class=\"key\">as</span> <span class=\"nam\">e</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t133\" href=\"#t133\">133</a></span><span class=\"t\">            <span class=\"nam\">print</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">&#10060; Error saving knowledge base: </span><span class=\"op\">{</span><span class=\"nam\">str</span><span class=\"op\">(</span><span class=\"nam\">e</span><span class=\"op\">)</span><span class=\"op\">}</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t134\" href=\"#t134\">134</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t135\" href=\"#t135\">135</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">add_document</span><span class=\"op\">(</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t136\" href=\"#t136\">136</a></span><span class=\"t\">        <span class=\"nam\">self</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t137\" href=\"#t137\">137</a></span><span class=\"t\">        <span class=\"nam\">title</span><span class=\"op\">:</span> <span class=\"nam\">str</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t138\" href=\"#t138\">138</a></span><span class=\"t\">        <span class=\"nam\">content</span><span class=\"op\">:</span> <span class=\"nam\">str</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t139\" href=\"#t139\">139</a></span><span class=\"t\">        <span class=\"nam\">url</span><span class=\"op\">:</span> <span class=\"nam\">Optional</span><span class=\"op\">[</span><span class=\"nam\">str</span><span class=\"op\">]</span> <span class=\"op\">=</span> <span class=\"key\">None</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t140\" href=\"#t140\">140</a></span><span class=\"t\">        <span class=\"nam\">tags</span><span class=\"op\">:</span> <span class=\"nam\">List</span><span class=\"op\">[</span><span class=\"nam\">str</span><span class=\"op\">]</span> <span class=\"op\">=</span> <span class=\"key\">None</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t141\" href=\"#t141\">141</a></span><span class=\"t\">    <span class=\"op\">)</span> <span class=\"op\">-></span> <span class=\"nam\">str</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t142\" href=\"#t142\">142</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Add a new research document\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t143\" href=\"#t143\">143</a></span><span class=\"t\">        <span class=\"nam\">doc</span> <span class=\"op\">=</span> <span class=\"nam\">ResearchDocument</span><span class=\"op\">(</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t144\" href=\"#t144\">144</a></span><span class=\"t\">            <span class=\"nam\">id</span><span class=\"op\">=</span><span class=\"str\">\"\"</span><span class=\"op\">,</span>  <span class=\"com\"># Will be generated</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t145\" href=\"#t145\">145</a></span><span class=\"t\">            <span class=\"nam\">title</span><span class=\"op\">=</span><span class=\"nam\">title</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t146\" href=\"#t146\">146</a></span><span class=\"t\">            <span class=\"nam\">content</span><span class=\"op\">=</span><span class=\"nam\">content</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t147\" href=\"#t147\">147</a></span><span class=\"t\">            <span class=\"nam\">url</span><span class=\"op\">=</span><span class=\"nam\">url</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t148\" href=\"#t148\">148</a></span><span class=\"t\">            <span class=\"nam\">tags</span><span class=\"op\">=</span><span class=\"nam\">tags</span> <span class=\"key\">or</span> <span class=\"op\">[</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t149\" href=\"#t149\">149</a></span><span class=\"t\">        <span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t150\" href=\"#t150\">150</a></span><span class=\"t\">        <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">id</span> <span class=\"op\">=</span> <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">generate_id</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t151\" href=\"#t151\">151</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t152\" href=\"#t152\">152</a></span><span class=\"t\">        <span class=\"com\"># Check if document already exists</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t153\" href=\"#t153\">153</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">id</span> <span class=\"key\">in</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t154\" href=\"#t154\">154</a></span><span class=\"t\">            <span class=\"nam\">print</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">&#128260; Updating existing document: </span><span class=\"op\">{</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">title</span><span class=\"op\">}</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t155\" href=\"#t155\">155</a></span><span class=\"t\">            <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">[</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">id</span><span class=\"op\">]</span><span class=\"op\">.</span><span class=\"nam\">last_updated</span> <span class=\"op\">=</span> <span class=\"nam\">datetime</span><span class=\"op\">.</span><span class=\"nam\">now</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">.</span><span class=\"nam\">isoformat</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t156\" href=\"#t156\">156</a></span><span class=\"t\">        <span class=\"key\">else</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t157\" href=\"#t157\">157</a></span><span class=\"t\">            <span class=\"nam\">print</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">&#128196; Adding new document: </span><span class=\"op\">{</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">title</span><span class=\"op\">}</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t158\" href=\"#t158\">158</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t159\" href=\"#t159\">159</a></span><span class=\"t\">        <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">[</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">id</span><span class=\"op\">]</span> <span class=\"op\">=</span> <span class=\"nam\">doc</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t160\" href=\"#t160\">160</a></span><span class=\"t\">        <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">save</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t161\" href=\"#t161\">161</a></span><span class=\"t\">        <span class=\"key\">return</span> <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">id</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t162\" href=\"#t162\">162</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t163\" href=\"#t163\">163</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">search_documents</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">,</span> <span class=\"nam\">query</span><span class=\"op\">:</span> <span class=\"nam\">str</span><span class=\"op\">,</span> <span class=\"nam\">limit</span><span class=\"op\">:</span> <span class=\"nam\">int</span> <span class=\"op\">=</span> <span class=\"num\">5</span><span class=\"op\">)</span> <span class=\"op\">-></span> <span class=\"nam\">List</span><span class=\"op\">[</span><span class=\"nam\">ResearchDocument</span><span class=\"op\">]</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t164\" href=\"#t164\">164</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Search documents by query\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t165\" href=\"#t165\">165</a></span><span class=\"t\">        <span class=\"nam\">query_lower</span> <span class=\"op\">=</span> <span class=\"nam\">query</span><span class=\"op\">.</span><span class=\"nam\">lower</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">.</span><span class=\"nam\">strip</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t166\" href=\"#t166\">166</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t167\" href=\"#t167\">167</a></span><span class=\"t\">        <span class=\"com\"># Handle empty queries</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t168\" href=\"#t168\">168</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"key\">not</span> <span class=\"nam\">query_lower</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t169\" href=\"#t169\">169</a></span><span class=\"t\">            <span class=\"key\">return</span> <span class=\"op\">[</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t170\" href=\"#t170\">170</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t171\" href=\"#t171\">171</a></span><span class=\"t\">        <span class=\"nam\">results</span> <span class=\"op\">=</span> <span class=\"op\">[</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t172\" href=\"#t172\">172</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t173\" href=\"#t173\">173</a></span><span class=\"t\">        <span class=\"key\">for</span> <span class=\"nam\">doc</span> <span class=\"key\">in</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">.</span><span class=\"nam\">values</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t174\" href=\"#t174\">174</a></span><span class=\"t\">            <span class=\"nam\">score</span> <span class=\"op\">=</span> <span class=\"num\">0</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t175\" href=\"#t175\">175</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t176\" href=\"#t176\">176</a></span><span class=\"t\">            <span class=\"com\"># Title matches (highest weight)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t177\" href=\"#t177\">177</a></span><span class=\"t\">            <span class=\"key\">if</span> <span class=\"nam\">query_lower</span> <span class=\"key\">in</span> <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">title</span><span class=\"op\">.</span><span class=\"nam\">lower</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t178\" href=\"#t178\">178</a></span><span class=\"t\">                <span class=\"nam\">score</span> <span class=\"op\">+=</span> <span class=\"num\">10</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t179\" href=\"#t179\">179</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t180\" href=\"#t180\">180</a></span><span class=\"t\">            <span class=\"com\"># Content matches (count occurrences)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t181\" href=\"#t181\">181</a></span><span class=\"t\">            <span class=\"nam\">content_lower</span> <span class=\"op\">=</span> <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">content</span><span class=\"op\">.</span><span class=\"nam\">lower</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t182\" href=\"#t182\">182</a></span><span class=\"t\">            <span class=\"nam\">content_words</span> <span class=\"op\">=</span> <span class=\"nam\">content_lower</span><span class=\"op\">.</span><span class=\"nam\">split</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t183\" href=\"#t183\">183</a></span><span class=\"t\">            <span class=\"nam\">query_words</span> <span class=\"op\">=</span> <span class=\"nam\">query_lower</span><span class=\"op\">.</span><span class=\"nam\">split</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t184\" href=\"#t184\">184</a></span><span class=\"t\">            <span class=\"key\">for</span> <span class=\"nam\">word</span> <span class=\"key\">in</span> <span class=\"nam\">query_words</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t185\" href=\"#t185\">185</a></span><span class=\"t\">                <span class=\"nam\">count</span> <span class=\"op\">=</span> <span class=\"nam\">content_lower</span><span class=\"op\">.</span><span class=\"nam\">count</span><span class=\"op\">(</span><span class=\"nam\">word</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t186\" href=\"#t186\">186</a></span><span class=\"t\">                <span class=\"key\">if</span> <span class=\"nam\">count</span> <span class=\"op\">></span> <span class=\"num\">0</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t187\" href=\"#t187\">187</a></span><span class=\"t\">                    <span class=\"nam\">score</span> <span class=\"op\">+=</span> <span class=\"nam\">count</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t188\" href=\"#t188\">188</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t189\" href=\"#t189\">189</a></span><span class=\"t\">            <span class=\"com\"># Tag matches</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t190\" href=\"#t190\">190</a></span><span class=\"t\">            <span class=\"key\">if</span> <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">tags</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t191\" href=\"#t191\">191</a></span><span class=\"t\">                <span class=\"nam\">tags_lower</span> <span class=\"op\">=</span> <span class=\"str\">\" \"</span><span class=\"op\">.</span><span class=\"nam\">join</span><span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">tags</span><span class=\"op\">)</span><span class=\"op\">.</span><span class=\"nam\">lower</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t192\" href=\"#t192\">192</a></span><span class=\"t\">                <span class=\"key\">if</span> <span class=\"nam\">query_lower</span> <span class=\"key\">in</span> <span class=\"nam\">tags_lower</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t193\" href=\"#t193\">193</a></span><span class=\"t\">                    <span class=\"nam\">score</span> <span class=\"op\">+=</span> <span class=\"num\">5</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t194\" href=\"#t194\">194</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t195\" href=\"#t195\">195</a></span><span class=\"t\">            <span class=\"com\"># Partial word matching for better coverage</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t196\" href=\"#t196\">196</a></span><span class=\"t\">            <span class=\"nam\">query_words</span> <span class=\"op\">=</span> <span class=\"nam\">query_lower</span><span class=\"op\">.</span><span class=\"nam\">split</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t197\" href=\"#t197\">197</a></span><span class=\"t\">            <span class=\"key\">for</span> <span class=\"nam\">word</span> <span class=\"key\">in</span> <span class=\"nam\">query_words</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t198\" href=\"#t198\">198</a></span><span class=\"t\">                <span class=\"key\">if</span> <span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">word</span><span class=\"op\">)</span> <span class=\"op\">></span> <span class=\"num\">3</span><span class=\"op\">:</span>  <span class=\"com\"># Only match longer words</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t199\" href=\"#t199\">199</a></span><span class=\"t\">                    <span class=\"key\">if</span> <span class=\"nam\">word</span> <span class=\"key\">in</span> <span class=\"nam\">content_lower</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t200\" href=\"#t200\">200</a></span><span class=\"t\">                        <span class=\"nam\">score</span> <span class=\"op\">+=</span> <span class=\"num\">1</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t201\" href=\"#t201\">201</a></span><span class=\"t\">                    <span class=\"key\">if</span> <span class=\"nam\">word</span> <span class=\"key\">in</span> <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">title</span><span class=\"op\">.</span><span class=\"nam\">lower</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t202\" href=\"#t202\">202</a></span><span class=\"t\">                        <span class=\"nam\">score</span> <span class=\"op\">+=</span> <span class=\"num\">3</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t203\" href=\"#t203\">203</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t204\" href=\"#t204\">204</a></span><span class=\"t\">            <span class=\"com\"># Related term matching (only if query is exact match to a key)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t205\" href=\"#t205\">205</a></span><span class=\"t\">            <span class=\"key\">if</span> <span class=\"nam\">query_lower</span> <span class=\"key\">in</span> <span class=\"nam\">RELATED_TERMS</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t206\" href=\"#t206\">206</a></span><span class=\"t\">                <span class=\"key\">for</span> <span class=\"nam\">related</span> <span class=\"key\">in</span> <span class=\"nam\">RELATED_TERMS</span><span class=\"op\">[</span><span class=\"nam\">query_lower</span><span class=\"op\">]</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t207\" href=\"#t207\">207</a></span><span class=\"t\">                    <span class=\"key\">if</span> <span class=\"nam\">related</span> <span class=\"key\">in</span> <span class=\"nam\">content_lower</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t208\" href=\"#t208\">208</a></span><span class=\"t\">                        <span class=\"nam\">score</span> <span class=\"op\">+=</span> <span class=\"num\">2</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t209\" href=\"#t209\">209</a></span><span class=\"t\">                    <span class=\"key\">if</span> <span class=\"nam\">related</span> <span class=\"key\">in</span> <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">title</span><span class=\"op\">.</span><span class=\"nam\">lower</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t210\" href=\"#t210\">210</a></span><span class=\"t\">                        <span class=\"nam\">score</span> <span class=\"op\">+=</span> <span class=\"num\">4</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t211\" href=\"#t211\">211</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t212\" href=\"#t212\">212</a></span><span class=\"t\">            <span class=\"com\"># Boost space data for general queries (but not for specific terms)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t213\" href=\"#t213\">213</a></span><span class=\"t\">            <span class=\"key\">if</span> <span class=\"op\">(</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t214\" href=\"#t214\">214</a></span><span class=\"t\">                <span class=\"str\">\"space-data\"</span> <span class=\"key\">in</span> <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">tags</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t215\" href=\"#t215\">215</a></span><span class=\"t\">                <span class=\"key\">and</span> <span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">query_words</span><span class=\"op\">)</span> <span class=\"op\">==</span> <span class=\"num\">1</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t216\" href=\"#t216\">216</a></span><span class=\"t\">                <span class=\"key\">and</span> <span class=\"nam\">query_words</span><span class=\"op\">[</span><span class=\"num\">0</span><span class=\"op\">]</span> <span class=\"key\">in</span> <span class=\"op\">[</span><span class=\"str\">\"hypercode\"</span><span class=\"op\">,</span> <span class=\"str\">\"what\"</span><span class=\"op\">,</span> <span class=\"str\">\"tell\"</span><span class=\"op\">,</span> <span class=\"str\">\"explain\"</span><span class=\"op\">,</span> <span class=\"str\">\"about\"</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t217\" href=\"#t217\">217</a></span><span class=\"t\">            <span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t218\" href=\"#t218\">218</a></span><span class=\"t\">                <span class=\"nam\">score</span> <span class=\"op\">+=</span> <span class=\"num\">3</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t219\" href=\"#t219\">219</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t220\" href=\"#t220\">220</a></span><span class=\"t\">            <span class=\"key\">if</span> <span class=\"nam\">score</span> <span class=\"op\">></span> <span class=\"num\">0</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t221\" href=\"#t221\">221</a></span><span class=\"t\">                <span class=\"nam\">results</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">,</span> <span class=\"nam\">score</span><span class=\"op\">)</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t222\" href=\"#t222\">222</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t223\" href=\"#t223\">223</a></span><span class=\"t\">        <span class=\"com\"># Sort by score and return top results</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t224\" href=\"#t224\">224</a></span><span class=\"t\">        <span class=\"nam\">results</span><span class=\"op\">.</span><span class=\"nam\">sort</span><span class=\"op\">(</span><span class=\"nam\">key</span><span class=\"op\">=</span><span class=\"key\">lambda</span> <span class=\"nam\">x</span><span class=\"op\">:</span> <span class=\"nam\">x</span><span class=\"op\">[</span><span class=\"num\">1</span><span class=\"op\">]</span><span class=\"op\">,</span> <span class=\"nam\">reverse</span><span class=\"op\">=</span><span class=\"key\">True</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t225\" href=\"#t225\">225</a></span><span class=\"t\">        <span class=\"key\">return</span> <span class=\"op\">[</span><span class=\"nam\">doc</span> <span class=\"key\">for</span> <span class=\"nam\">doc</span><span class=\"op\">,</span> <span class=\"nam\">score</span> <span class=\"key\">in</span> <span class=\"nam\">results</span><span class=\"op\">[</span><span class=\"op\">:</span><span class=\"nam\">limit</span><span class=\"op\">]</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t226\" href=\"#t226\">226</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t227\" href=\"#t227\">227</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">get_context_for_query</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">,</span> <span class=\"nam\">query</span><span class=\"op\">:</span> <span class=\"nam\">str</span><span class=\"op\">,</span> <span class=\"nam\">max_context_length</span><span class=\"op\">:</span> <span class=\"nam\">int</span> <span class=\"op\">=</span> <span class=\"num\">4000</span><span class=\"op\">)</span> <span class=\"op\">-></span> <span class=\"nam\">str</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t228\" href=\"#t228\">228</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Get relevant context for a query\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t229\" href=\"#t229\">229</a></span><span class=\"t\">        <span class=\"nam\">relevant_docs</span> <span class=\"op\">=</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">search_documents</span><span class=\"op\">(</span><span class=\"nam\">query</span><span class=\"op\">,</span> <span class=\"nam\">limit</span><span class=\"op\">=</span><span class=\"num\">3</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t230\" href=\"#t230\">230</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t231\" href=\"#t231\">231</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"key\">not</span> <span class=\"nam\">relevant_docs</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t232\" href=\"#t232\">232</a></span><span class=\"t\">            <span class=\"key\">return</span> <span class=\"str\">\"No relevant research data found.\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t233\" href=\"#t233\">233</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t234\" href=\"#t234\">234</a></span><span class=\"t\">        <span class=\"nam\">context_parts</span> <span class=\"op\">=</span> <span class=\"op\">[</span><span class=\"str\">\"Relevant HyperCode Research Data:\\n\"</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t235\" href=\"#t235\">235</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t236\" href=\"#t236\">236</a></span><span class=\"t\">        <span class=\"key\">for</span> <span class=\"nam\">doc</span> <span class=\"key\">in</span> <span class=\"nam\">relevant_docs</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t237\" href=\"#t237\">237</a></span><span class=\"t\">            <span class=\"nam\">context_parts</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">## </span><span class=\"op\">{</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">title</span><span class=\"op\">}</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t238\" href=\"#t238\">238</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t239\" href=\"#t239\">239</a></span><span class=\"t\">            <span class=\"com\"># Truncate content if too long</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t240\" href=\"#t240\">240</a></span><span class=\"t\">            <span class=\"nam\">content</span> <span class=\"op\">=</span> <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">content</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t241\" href=\"#t241\">241</a></span><span class=\"t\">            <span class=\"key\">if</span> <span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">content</span><span class=\"op\">)</span> <span class=\"op\">></span> <span class=\"num\">1000</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t242\" href=\"#t242\">242</a></span><span class=\"t\">                <span class=\"nam\">content</span> <span class=\"op\">=</span> <span class=\"nam\">content</span><span class=\"op\">[</span><span class=\"op\">:</span><span class=\"num\">1000</span><span class=\"op\">]</span> <span class=\"op\">+</span> <span class=\"str\">\"...\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t243\" href=\"#t243\">243</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t244\" href=\"#t244\">244</a></span><span class=\"t\">            <span class=\"nam\">context_parts</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"nam\">content</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t245\" href=\"#t245\">245</a></span><span class=\"t\">            <span class=\"key\">if</span> <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">url</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t246\" href=\"#t246\">246</a></span><span class=\"t\">                <span class=\"nam\">context_parts</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">Source: </span><span class=\"op\">{</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">url</span><span class=\"op\">}</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t247\" href=\"#t247\">247</a></span><span class=\"t\">            <span class=\"nam\">context_parts</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"str\">\"\"</span><span class=\"op\">)</span>  <span class=\"com\"># Empty line</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t248\" href=\"#t248\">248</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t249\" href=\"#t249\">249</a></span><span class=\"t\">        <span class=\"com\"># Join and truncate if necessary</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t250\" href=\"#t250\">250</a></span><span class=\"t\">        <span class=\"nam\">full_context</span> <span class=\"op\">=</span> <span class=\"str\">\"\\n\"</span><span class=\"op\">.</span><span class=\"nam\">join</span><span class=\"op\">(</span><span class=\"nam\">context_parts</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t251\" href=\"#t251\">251</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t252\" href=\"#t252\">252</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">full_context</span><span class=\"op\">)</span> <span class=\"op\">></span> <span class=\"nam\">max_context_length</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t253\" href=\"#t253\">253</a></span><span class=\"t\">            <span class=\"nam\">full_context</span> <span class=\"op\">=</span> <span class=\"nam\">full_context</span><span class=\"op\">[</span><span class=\"op\">:</span><span class=\"nam\">max_context_length</span><span class=\"op\">]</span> <span class=\"op\">+</span> <span class=\"str\">\"...\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t254\" href=\"#t254\">254</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t255\" href=\"#t255\">255</a></span><span class=\"t\">        <span class=\"key\">return</span> <span class=\"nam\">full_context</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t256\" href=\"#t256\">256</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t257\" href=\"#t257\">257</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">list_documents</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">)</span> <span class=\"op\">-></span> <span class=\"nam\">List</span><span class=\"op\">[</span><span class=\"nam\">ResearchDocument</span><span class=\"op\">]</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t258\" href=\"#t258\">258</a></span><span class=\"t\">        <span class=\"str\">\"\"\"List all documents\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t259\" href=\"#t259\">259</a></span><span class=\"t\">        <span class=\"key\">return</span> <span class=\"nam\">list</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">.</span><span class=\"nam\">values</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t260\" href=\"#t260\">260</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t261\" href=\"#t261\">261</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">get_document</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">,</span> <span class=\"nam\">doc_id</span><span class=\"op\">:</span> <span class=\"nam\">str</span><span class=\"op\">)</span> <span class=\"op\">-></span> <span class=\"nam\">Optional</span><span class=\"op\">[</span><span class=\"nam\">ResearchDocument</span><span class=\"op\">]</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t262\" href=\"#t262\">262</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Get a specific document by ID\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t263\" href=\"#t263\">263</a></span><span class=\"t\">        <span class=\"key\">return</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">.</span><span class=\"nam\">get</span><span class=\"op\">(</span><span class=\"nam\">doc_id</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t264\" href=\"#t264\">264</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t265\" href=\"#t265\">265</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">delete_document</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">,</span> <span class=\"nam\">doc_id</span><span class=\"op\">:</span> <span class=\"nam\">str</span><span class=\"op\">)</span> <span class=\"op\">-></span> <span class=\"nam\">bool</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t266\" href=\"#t266\">266</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Delete a document\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t267\" href=\"#t267\">267</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"nam\">doc_id</span> <span class=\"key\">in</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t268\" href=\"#t268\">268</a></span><span class=\"t\">            <span class=\"key\">del</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">[</span><span class=\"nam\">doc_id</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t269\" href=\"#t269\">269</a></span><span class=\"t\">            <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">save</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t270\" href=\"#t270\">270</a></span><span class=\"t\">            <span class=\"key\">return</span> <span class=\"key\">True</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t271\" href=\"#t271\">271</a></span><span class=\"t\">        <span class=\"key\">return</span> <span class=\"key\">False</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t272\" href=\"#t272\">272</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t273\" href=\"#t273\">273</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">update_document</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">,</span> <span class=\"nam\">doc_id</span><span class=\"op\">:</span> <span class=\"nam\">str</span><span class=\"op\">,</span> <span class=\"op\">**</span><span class=\"nam\">kwargs</span><span class=\"op\">)</span> <span class=\"op\">-></span> <span class=\"nam\">bool</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t274\" href=\"#t274\">274</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Update an existing document\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t275\" href=\"#t275\">275</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"nam\">doc_id</span> <span class=\"key\">not</span> <span class=\"key\">in</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t276\" href=\"#t276\">276</a></span><span class=\"t\">            <span class=\"key\">return</span> <span class=\"key\">False</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t277\" href=\"#t277\">277</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t278\" href=\"#t278\">278</a></span><span class=\"t\">        <span class=\"nam\">doc</span> <span class=\"op\">=</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">[</span><span class=\"nam\">doc_id</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t279\" href=\"#t279\">279</a></span><span class=\"t\">        <span class=\"key\">for</span> <span class=\"nam\">key</span><span class=\"op\">,</span> <span class=\"nam\">value</span> <span class=\"key\">in</span> <span class=\"nam\">kwargs</span><span class=\"op\">.</span><span class=\"nam\">items</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t280\" href=\"#t280\">280</a></span><span class=\"t\">            <span class=\"key\">if</span> <span class=\"nam\">hasattr</span><span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">,</span> <span class=\"nam\">key</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t281\" href=\"#t281\">281</a></span><span class=\"t\">                <span class=\"nam\">setattr</span><span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">,</span> <span class=\"nam\">key</span><span class=\"op\">,</span> <span class=\"nam\">value</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t282\" href=\"#t282\">282</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t283\" href=\"#t283\">283</a></span><span class=\"t\">        <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">update_timestamp</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t284\" href=\"#t284\">284</a></span><span class=\"t\">        <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">save</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t285\" href=\"#t285\">285</a></span><span class=\"t\">        <span class=\"key\">return</span> <span class=\"key\">True</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t286\" href=\"#t286\">286</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t287\" href=\"#t287\">287</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">search_by_tags</span><span class=\"op\">(</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t288\" href=\"#t288\">288</a></span><span class=\"t\">        <span class=\"nam\">self</span><span class=\"op\">,</span> <span class=\"nam\">tags</span><span class=\"op\">:</span> <span class=\"nam\">List</span><span class=\"op\">[</span><span class=\"nam\">str</span><span class=\"op\">]</span><span class=\"op\">,</span> <span class=\"nam\">operator</span><span class=\"op\">:</span> <span class=\"nam\">str</span> <span class=\"op\">=</span> <span class=\"str\">\"AND\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t289\" href=\"#t289\">289</a></span><span class=\"t\">    <span class=\"op\">)</span> <span class=\"op\">-></span> <span class=\"nam\">List</span><span class=\"op\">[</span><span class=\"nam\">ResearchDocument</span><span class=\"op\">]</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t290\" href=\"#t290\">290</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Search documents by tags with AND/OR operators\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t291\" href=\"#t291\">291</a></span><span class=\"t\">        <span class=\"nam\">results</span> <span class=\"op\">=</span> <span class=\"op\">[</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t292\" href=\"#t292\">292</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t293\" href=\"#t293\">293</a></span><span class=\"t\">        <span class=\"key\">for</span> <span class=\"nam\">doc</span> <span class=\"key\">in</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">.</span><span class=\"nam\">values</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t294\" href=\"#t294\">294</a></span><span class=\"t\">            <span class=\"nam\">doc_tags</span> <span class=\"op\">=</span> <span class=\"nam\">set</span><span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">tags</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t295\" href=\"#t295\">295</a></span><span class=\"t\">            <span class=\"nam\">search_tags</span> <span class=\"op\">=</span> <span class=\"nam\">set</span><span class=\"op\">(</span><span class=\"nam\">tags</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t296\" href=\"#t296\">296</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t297\" href=\"#t297\">297</a></span><span class=\"t\">            <span class=\"key\">if</span> <span class=\"nam\">operator</span> <span class=\"op\">==</span> <span class=\"str\">\"AND\"</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t298\" href=\"#t298\">298</a></span><span class=\"t\">                <span class=\"key\">if</span> <span class=\"nam\">search_tags</span><span class=\"op\">.</span><span class=\"nam\">issubset</span><span class=\"op\">(</span><span class=\"nam\">doc_tags</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t299\" href=\"#t299\">299</a></span><span class=\"t\">                    <span class=\"nam\">results</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t300\" href=\"#t300\">300</a></span><span class=\"t\">            <span class=\"key\">elif</span> <span class=\"nam\">operator</span> <span class=\"op\">==</span> <span class=\"str\">\"OR\"</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t301\" href=\"#t301\">301</a></span><span class=\"t\">                <span class=\"key\">if</span> <span class=\"nam\">doc_tags</span><span class=\"op\">.</span><span class=\"nam\">intersection</span><span class=\"op\">(</span><span class=\"nam\">search_tags</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t302\" href=\"#t302\">302</a></span><span class=\"t\">                    <span class=\"nam\">results</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t303\" href=\"#t303\">303</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t304\" href=\"#t304\">304</a></span><span class=\"t\">        <span class=\"key\">return</span> <span class=\"nam\">results</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t305\" href=\"#t305\">305</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t306\" href=\"#t306\">306</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">get_document_statistics</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">)</span> <span class=\"op\">-></span> <span class=\"nam\">Dict</span><span class=\"op\">[</span><span class=\"nam\">str</span><span class=\"op\">,</span> <span class=\"nam\">Any</span><span class=\"op\">]</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t307\" href=\"#t307\">307</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Get statistics about the knowledge base\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t308\" href=\"#t308\">308</a></span><span class=\"t\">        <span class=\"nam\">total_docs</span> <span class=\"op\">=</span> <span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t309\" href=\"#t309\">309</a></span><span class=\"t\">        <span class=\"nam\">tag_counts</span> <span class=\"op\">=</span> <span class=\"nam\">defaultdict</span><span class=\"op\">(</span><span class=\"nam\">int</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t310\" href=\"#t310\">310</a></span><span class=\"t\">        <span class=\"nam\">total_content_length</span> <span class=\"op\">=</span> <span class=\"num\">0</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t311\" href=\"#t311\">311</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t312\" href=\"#t312\">312</a></span><span class=\"t\">        <span class=\"key\">for</span> <span class=\"nam\">doc</span> <span class=\"key\">in</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">.</span><span class=\"nam\">values</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t313\" href=\"#t313\">313</a></span><span class=\"t\">            <span class=\"key\">for</span> <span class=\"nam\">tag</span> <span class=\"key\">in</span> <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">tags</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t314\" href=\"#t314\">314</a></span><span class=\"t\">                <span class=\"nam\">tag_counts</span><span class=\"op\">[</span><span class=\"nam\">tag</span><span class=\"op\">]</span> <span class=\"op\">+=</span> <span class=\"num\">1</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t315\" href=\"#t315\">315</a></span><span class=\"t\">            <span class=\"nam\">total_content_length</span> <span class=\"op\">+=</span> <span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">content</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t316\" href=\"#t316\">316</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t317\" href=\"#t317\">317</a></span><span class=\"t\">        <span class=\"key\">return</span> <span class=\"op\">{</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t318\" href=\"#t318\">318</a></span><span class=\"t\">            <span class=\"str\">\"total_documents\"</span><span class=\"op\">:</span> <span class=\"nam\">total_docs</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t319\" href=\"#t319\">319</a></span><span class=\"t\">            <span class=\"str\">\"total_content_length\"</span><span class=\"op\">:</span> <span class=\"nam\">total_content_length</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t320\" href=\"#t320\">320</a></span><span class=\"t\">            <span class=\"str\">\"average_content_length\"</span><span class=\"op\">:</span> <span class=\"nam\">total_content_length</span> <span class=\"op\">/</span> <span class=\"nam\">max</span><span class=\"op\">(</span><span class=\"nam\">total_docs</span><span class=\"op\">,</span> <span class=\"num\">1</span><span class=\"op\">)</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t321\" href=\"#t321\">321</a></span><span class=\"t\">            <span class=\"str\">\"unique_tags\"</span><span class=\"op\">:</span> <span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">tag_counts</span><span class=\"op\">)</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t322\" href=\"#t322\">322</a></span><span class=\"t\">            <span class=\"str\">\"tag_distribution\"</span><span class=\"op\">:</span> <span class=\"nam\">dict</span><span class=\"op\">(</span><span class=\"nam\">tag_counts</span><span class=\"op\">)</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t323\" href=\"#t323\">323</a></span><span class=\"t\">            <span class=\"str\">\"oldest_document\"</span><span class=\"op\">:</span> <span class=\"nam\">min</span><span class=\"op\">(</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t324\" href=\"#t324\">324</a></span><span class=\"t\">                <span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">created_at</span> <span class=\"key\">for</span> <span class=\"nam\">doc</span> <span class=\"key\">in</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">.</span><span class=\"nam\">values</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">)</span><span class=\"op\">,</span> <span class=\"nam\">default</span><span class=\"op\">=</span><span class=\"key\">None</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t325\" href=\"#t325\">325</a></span><span class=\"t\">            <span class=\"op\">)</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t326\" href=\"#t326\">326</a></span><span class=\"t\">            <span class=\"str\">\"newest_document\"</span><span class=\"op\">:</span> <span class=\"nam\">max</span><span class=\"op\">(</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t327\" href=\"#t327\">327</a></span><span class=\"t\">                <span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">created_at</span> <span class=\"key\">for</span> <span class=\"nam\">doc</span> <span class=\"key\">in</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">.</span><span class=\"nam\">values</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">)</span><span class=\"op\">,</span> <span class=\"nam\">default</span><span class=\"op\">=</span><span class=\"key\">None</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t328\" href=\"#t328\">328</a></span><span class=\"t\">            <span class=\"op\">)</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t329\" href=\"#t329\">329</a></span><span class=\"t\">        <span class=\"op\">}</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t330\" href=\"#t330\">330</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t331\" href=\"#t331\">331</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">export_format</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">,</span> <span class=\"nam\">format_type</span><span class=\"op\">:</span> <span class=\"nam\">str</span> <span class=\"op\">=</span> <span class=\"str\">\"json\"</span><span class=\"op\">)</span> <span class=\"op\">-></span> <span class=\"nam\">str</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t332\" href=\"#t332\">332</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Export knowledge base in different formats\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t333\" href=\"#t333\">333</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"nam\">format_type</span> <span class=\"op\">==</span> <span class=\"str\">\"json\"</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t334\" href=\"#t334\">334</a></span><span class=\"t\">            <span class=\"key\">return</span> <span class=\"nam\">json</span><span class=\"op\">.</span><span class=\"nam\">dumps</span><span class=\"op\">(</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t335\" href=\"#t335\">335</a></span><span class=\"t\">                <span class=\"op\">{</span><span class=\"nam\">doc_id</span><span class=\"op\">:</span> <span class=\"nam\">asdict</span><span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">)</span> <span class=\"key\">for</span> <span class=\"nam\">doc_id</span><span class=\"op\">,</span> <span class=\"nam\">doc</span> <span class=\"key\">in</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">.</span><span class=\"nam\">items</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">}</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t336\" href=\"#t336\">336</a></span><span class=\"t\">                <span class=\"nam\">indent</span><span class=\"op\">=</span><span class=\"num\">2</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t337\" href=\"#t337\">337</a></span><span class=\"t\">            <span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t338\" href=\"#t338\">338</a></span><span class=\"t\">        <span class=\"key\">elif</span> <span class=\"nam\">format_type</span> <span class=\"op\">==</span> <span class=\"str\">\"markdown\"</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t339\" href=\"#t339\">339</a></span><span class=\"t\">            <span class=\"nam\">lines</span> <span class=\"op\">=</span> <span class=\"op\">[</span><span class=\"str\">\"# HyperCode Knowledge Base Export\\n\"</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t340\" href=\"#t340\">340</a></span><span class=\"t\">            <span class=\"key\">for</span> <span class=\"nam\">doc</span> <span class=\"key\">in</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">.</span><span class=\"nam\">values</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t341\" href=\"#t341\">341</a></span><span class=\"t\">                <span class=\"nam\">lines</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">## </span><span class=\"op\">{</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">title</span><span class=\"op\">}</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t342\" href=\"#t342\">342</a></span><span class=\"t\">                <span class=\"nam\">lines</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">**Tags:** </span><span class=\"op\">{</span><span class=\"str\">', '</span><span class=\"op\">.</span><span class=\"nam\">join</span><span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">tags</span><span class=\"op\">)</span><span class=\"op\">}</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t343\" href=\"#t343\">343</a></span><span class=\"t\">                <span class=\"nam\">lines</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">**Created:** </span><span class=\"op\">{</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">created_at</span><span class=\"op\">}</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t344\" href=\"#t344\">344</a></span><span class=\"t\">                <span class=\"key\">if</span> <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">url</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t345\" href=\"#t345\">345</a></span><span class=\"t\">                    <span class=\"nam\">lines</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">**URL:** </span><span class=\"op\">{</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">url</span><span class=\"op\">}</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t346\" href=\"#t346\">346</a></span><span class=\"t\">                <span class=\"nam\">lines</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"str\">\"\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t347\" href=\"#t347\">347</a></span><span class=\"t\">                <span class=\"nam\">lines</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">content</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t348\" href=\"#t348\">348</a></span><span class=\"t\">                <span class=\"nam\">lines</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"str\">\"\\n---\\n\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t349\" href=\"#t349\">349</a></span><span class=\"t\">            <span class=\"key\">return</span> <span class=\"str\">\"\\n\"</span><span class=\"op\">.</span><span class=\"nam\">join</span><span class=\"op\">(</span><span class=\"nam\">lines</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t350\" href=\"#t350\">350</a></span><span class=\"t\">        <span class=\"key\">else</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t351\" href=\"#t351\">351</a></span><span class=\"t\">            <span class=\"key\">raise</span> <span class=\"nam\">ValueError</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">Unsupported format: </span><span class=\"op\">{</span><span class=\"nam\">format_type</span><span class=\"op\">}</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t352\" href=\"#t352\">352</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t353\" href=\"#t353\">353</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">validate_all_documents</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">)</span> <span class=\"op\">-></span> <span class=\"nam\">List</span><span class=\"op\">[</span><span class=\"nam\">str</span><span class=\"op\">]</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t354\" href=\"#t354\">354</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Validate all documents and return list of errors\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t355\" href=\"#t355\">355</a></span><span class=\"t\">        <span class=\"nam\">errors</span> <span class=\"op\">=</span> <span class=\"op\">[</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t356\" href=\"#t356\">356</a></span><span class=\"t\">        <span class=\"key\">for</span> <span class=\"nam\">doc_id</span><span class=\"op\">,</span> <span class=\"nam\">doc</span> <span class=\"key\">in</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">.</span><span class=\"nam\">items</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t357\" href=\"#t357\">357</a></span><span class=\"t\">            <span class=\"key\">try</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t358\" href=\"#t358\">358</a></span><span class=\"t\">                <span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">validate</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t359\" href=\"#t359\">359</a></span><span class=\"t\">            <span class=\"key\">except</span> <span class=\"nam\">ValueError</span> <span class=\"key\">as</span> <span class=\"nam\">e</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t360\" href=\"#t360\">360</a></span><span class=\"t\">                <span class=\"nam\">errors</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">Document </span><span class=\"op\">{</span><span class=\"nam\">doc_id</span><span class=\"op\">}</span><span class=\"fst\"> (</span><span class=\"op\">{</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">title</span><span class=\"op\">}</span><span class=\"fst\">): </span><span class=\"op\">{</span><span class=\"nam\">str</span><span class=\"op\">(</span><span class=\"nam\">e</span><span class=\"op\">)</span><span class=\"op\">}</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t361\" href=\"#t361\">361</a></span><span class=\"t\">        <span class=\"key\">return</span> <span class=\"nam\">errors</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t362\" href=\"#t362\">362</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t363\" href=\"#t363\">363</a></span><span class=\"t\">    <span class=\"key\">def</span> <span class=\"nam\">cleanup_duplicates</span><span class=\"op\">(</span><span class=\"nam\">self</span><span class=\"op\">)</span> <span class=\"op\">-></span> <span class=\"nam\">int</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t364\" href=\"#t364\">364</a></span><span class=\"t\">        <span class=\"str\">\"\"\"Remove duplicate documents based on content hash\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t365\" href=\"#t365\">365</a></span><span class=\"t\">        <span class=\"nam\">seen_hashes</span> <span class=\"op\">=</span> <span class=\"nam\">set</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t366\" href=\"#t366\">366</a></span><span class=\"t\">        <span class=\"nam\">duplicates</span> <span class=\"op\">=</span> <span class=\"op\">[</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t367\" href=\"#t367\">367</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t368\" href=\"#t368\">368</a></span><span class=\"t\">        <span class=\"key\">for</span> <span class=\"nam\">doc_id</span><span class=\"op\">,</span> <span class=\"nam\">doc</span> <span class=\"key\">in</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">.</span><span class=\"nam\">items</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t369\" href=\"#t369\">369</a></span><span class=\"t\">            <span class=\"nam\">content_hash</span> <span class=\"op\">=</span> <span class=\"nam\">hashlib</span><span class=\"op\">.</span><span class=\"nam\">md5</span><span class=\"op\">(</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">content</span><span class=\"op\">.</span><span class=\"nam\">encode</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">)</span><span class=\"op\">.</span><span class=\"nam\">hexdigest</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t370\" href=\"#t370\">370</a></span><span class=\"t\">            <span class=\"key\">if</span> <span class=\"nam\">content_hash</span> <span class=\"key\">in</span> <span class=\"nam\">seen_hashes</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t371\" href=\"#t371\">371</a></span><span class=\"t\">                <span class=\"nam\">duplicates</span><span class=\"op\">.</span><span class=\"nam\">append</span><span class=\"op\">(</span><span class=\"nam\">doc_id</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t372\" href=\"#t372\">372</a></span><span class=\"t\">            <span class=\"key\">else</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t373\" href=\"#t373\">373</a></span><span class=\"t\">                <span class=\"nam\">seen_hashes</span><span class=\"op\">.</span><span class=\"nam\">add</span><span class=\"op\">(</span><span class=\"nam\">content_hash</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t374\" href=\"#t374\">374</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t375\" href=\"#t375\">375</a></span><span class=\"t\">        <span class=\"key\">for</span> <span class=\"nam\">doc_id</span> <span class=\"key\">in</span> <span class=\"nam\">duplicates</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t376\" href=\"#t376\">376</a></span><span class=\"t\">            <span class=\"key\">del</span> <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">documents</span><span class=\"op\">[</span><span class=\"nam\">doc_id</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t377\" href=\"#t377\">377</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t378\" href=\"#t378\">378</a></span><span class=\"t\">        <span class=\"key\">if</span> <span class=\"nam\">duplicates</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t379\" href=\"#t379\">379</a></span><span class=\"t\">            <span class=\"nam\">self</span><span class=\"op\">.</span><span class=\"nam\">save</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t380\" href=\"#t380\">380</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t381\" href=\"#t381\">381</a></span><span class=\"t\">        <span class=\"key\">return</span> <span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">duplicates</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t382\" href=\"#t382\">382</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t383\" href=\"#t383\">383</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t384\" href=\"#t384\">384</a></span><span class=\"t\"><span class=\"key\">def</span> <span class=\"nam\">initialize_sample_data</span><span class=\"op\">(</span><span class=\"op\">)</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t385\" href=\"#t385\">385</a></span><span class=\"t\">    <span class=\"str\">\"\"\"Initialize with sample HyperCode research data\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t386\" href=\"#t386\">386</a></span><span class=\"t\">    <span class=\"nam\">kb</span> <span class=\"op\">=</span> <span class=\"nam\">HyperCodeKnowledgeBase</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t387\" href=\"#t387\">387</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t388\" href=\"#t388\">388</a></span><span class=\"t\">    <span class=\"com\"># Sample documents based on what would likely be in your Perplexity Space</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t389\" href=\"#t389\">389</a></span><span class=\"t\">    <span class=\"nam\">sample_docs</span> <span class=\"op\">=</span> <span class=\"op\">[</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t390\" href=\"#t390\">390</a></span><span class=\"t\">        <span class=\"op\">{</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t391\" href=\"#t391\">391</a></span><span class=\"t\">            <span class=\"str\">\"title\"</span><span class=\"op\">:</span> <span class=\"str\">\"HyperCode Language Specification v1.0.0\"</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t392\" href=\"#t392\">392</a></span><span class=\"t\">            <span class=\"str\">\"content\"</span><span class=\"op\">:</span> <span class=\"str\">\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t393\" href=\"#t393\">393</a></span><span class=\"t\"><span class=\"str\">            HyperCode is a neurodivergent-first programming language that supports:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t394\" href=\"#t394\">394</a></span><span class=\"t\"><span class=\"str\">            - Multiple syntax modes (visual, text, spatial)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t395\" href=\"#t395\">395</a></span><span class=\"t\"><span class=\"str\">            - AI-assisted code generation and debugging</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t396\" href=\"#t396\">396</a></span><span class=\"t\"><span class=\"str\">            - Multi-backend compilation (quantum, DNA, traditional)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t397\" href=\"#t397\">397</a></span><span class=\"t\"><span class=\"str\">            - Built-in accessibility features</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t398\" href=\"#t398\">398</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t399\" href=\"#t399\">399</a></span><span class=\"t\"><span class=\"str\">            Core syntax elements include:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t400\" href=\"#t400\">400</a></span><span class=\"t\"><span class=\"str\">            - Declarative statements with visual markers</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t401\" href=\"#t401\">401</a></span><span class=\"t\"><span class=\"str\">            - Pattern matching for cognitive flexibility</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t402\" href=\"#t402\">402</a></span><span class=\"t\"><span class=\"str\">            - Spatial code execution (2D and 3D)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t403\" href=\"#t403\">403</a></span><span class=\"t\"><span class=\"str\">            - Natural language programming interfaces</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t404\" href=\"#t404\">404</a></span><span class=\"t\"><span class=\"str\">            \"\"\"</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t405\" href=\"#t405\">405</a></span><span class=\"t\">            <span class=\"str\">\"tags\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"specification\"</span><span class=\"op\">,</span> <span class=\"str\">\"language\"</span><span class=\"op\">,</span> <span class=\"str\">\"syntax\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t406\" href=\"#t406\">406</a></span><span class=\"t\">        <span class=\"op\">}</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t407\" href=\"#t407\">407</a></span><span class=\"t\">        <span class=\"op\">{</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t408\" href=\"#t408\">408</a></span><span class=\"t\">            <span class=\"str\">\"title\"</span><span class=\"op\">:</span> <span class=\"str\">\"Neurodivergent-First Design Principles\"</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t409\" href=\"#t409\">409</a></span><span class=\"t\">            <span class=\"str\">\"content\"</span><span class=\"op\">:</span> <span class=\"str\">\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t410\" href=\"#t410\">410</a></span><span class=\"t\"><span class=\"str\">            Design principles for neurodivergent developers:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t411\" href=\"#t411\">411</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t412\" href=\"#t412\">412</a></span><span class=\"t\"><span class=\"str\">            1. Cognitive Flexibility:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t413\" href=\"#t413\">413</a></span><span class=\"t\"><span class=\"str\">            - Multiple ways to express the same concept</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t414\" href=\"#t414\">414</a></span><span class=\"t\"><span class=\"str\">            - No single \"right\" way to write code</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t415\" href=\"#t415\">415</a></span><span class=\"t\"><span class=\"str\">            - Support for different thinking patterns</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t416\" href=\"#t416\">416</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t417\" href=\"#t417\">417</a></span><span class=\"t\"><span class=\"str\">            2. Sensory Accommodation:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t418\" href=\"#t418\">418</a></span><span class=\"t\"><span class=\"str\">            - Customizable visual themes</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t419\" href=\"#t419\">419</a></span><span class=\"t\"><span class=\"str\">            - Adjustable information density</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t420\" href=\"#t420\">420</a></span><span class=\"t\"><span class=\"str\">            - Optional sound/haptic feedback</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t421\" href=\"#t421\">421</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t422\" href=\"#t422\">422</a></span><span class=\"t\"><span class=\"str\">            3. Executive Function Support:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t423\" href=\"#t423\">423</a></span><span class=\"t\"><span class=\"str\">            - Built-in reminders and planning tools</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t424\" href=\"#t424\">424</a></span><span class=\"t\"><span class=\"str\">            - Automatic code organization</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t425\" href=\"#t425\">425</a></span><span class=\"t\"><span class=\"str\">            - Progress tracking and milestones</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t426\" href=\"#t426\">426</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t427\" href=\"#t427\">427</a></span><span class=\"t\"><span class=\"str\">            4. Communication Clarity:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t428\" href=\"#t428\">428</a></span><span class=\"t\"><span class=\"str\">            - Explicit, literal error messages</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t429\" href=\"#t429\">429</a></span><span class=\"t\"><span class=\"str\">            - No ambiguous metaphors or idioms</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t430\" href=\"#t430\">430</a></span><span class=\"t\"><span class=\"str\">            - Clear, structured documentation</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t431\" href=\"#t431\">431</a></span><span class=\"t\"><span class=\"str\">            \"\"\"</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t432\" href=\"#t432\">432</a></span><span class=\"t\">            <span class=\"str\">\"tags\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"design\"</span><span class=\"op\">,</span> <span class=\"str\">\"accessibility\"</span><span class=\"op\">,</span> <span class=\"str\">\"neurodiversity\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t433\" href=\"#t433\">433</a></span><span class=\"t\">        <span class=\"op\">}</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t434\" href=\"#t434\">434</a></span><span class=\"t\">        <span class=\"op\">{</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t435\" href=\"#t435\">435</a></span><span class=\"t\">            <span class=\"str\">\"title\"</span><span class=\"op\">:</span> <span class=\"str\">\"Multi-Backend Architecture\"</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t436\" href=\"#t436\">436</a></span><span class=\"t\">            <span class=\"str\">\"content\"</span><span class=\"op\">:</span> <span class=\"str\">\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t437\" href=\"#t437\">437</a></span><span class=\"t\"><span class=\"str\">            HyperCode's compilation architecture supports:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t438\" href=\"#t438\">438</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t439\" href=\"#t439\">439</a></span><span class=\"t\"><span class=\"str\">            Traditional Backends:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t440\" href=\"#t440\">440</a></span><span class=\"t\"><span class=\"str\">            - x86/ARM assembly</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t441\" href=\"#t441\">441</a></span><span class=\"t\"><span class=\"str\">            - WebAssembly</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t442\" href=\"#t442\">442</a></span><span class=\"t\"><span class=\"str\">            - LLVM IR</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t443\" href=\"#t443\">443</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t444\" href=\"#t444\">444</a></span><span class=\"t\"><span class=\"str\">            AI Backends:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t445\" href=\"#t445\">445</a></span><span class=\"t\"><span class=\"str\">            - GPT-4/ Claude integration</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t446\" href=\"#t446\">446</a></span><span class=\"t\"><span class=\"str\">            - Local model execution</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t447\" href=\"#t447\">447</a></span><span class=\"t\"><span class=\"str\">            - Hybrid AI-human compilation</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t448\" href=\"#t448\">448</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t449\" href=\"#t449\">449</a></span><span class=\"t\"><span class=\"str\">            Exotic Backends:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t450\" href=\"#t450\">450</a></span><span class=\"t\"><span class=\"str\">            - Quantum computing circuits</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t451\" href=\"#t451\">451</a></span><span class=\"t\"><span class=\"str\">            - DNA strand displacement</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t452\" href=\"#t452\">452</a></span><span class=\"t\"><span class=\"str\">            - Neural network processors</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t453\" href=\"#t453\">453</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t454\" href=\"#t454\">454</a></span><span class=\"t\"><span class=\"str\">            Backend Selection:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t455\" href=\"#t455\">455</a></span><span class=\"t\"><span class=\"str\">            - Automatic based on problem type</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t456\" href=\"#t456\">456</a></span><span class=\"t\"><span class=\"str\">            - Manual override available</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t457\" href=\"#t457\">457</a></span><span class=\"t\"><span class=\"str\">            - Multi-backend optimization</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t458\" href=\"#t458\">458</a></span><span class=\"t\"><span class=\"str\">            \"\"\"</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t459\" href=\"#t459\">459</a></span><span class=\"t\">            <span class=\"str\">\"tags\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"architecture\"</span><span class=\"op\">,</span> <span class=\"str\">\"compilation\"</span><span class=\"op\">,</span> <span class=\"str\">\"backends\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t460\" href=\"#t460\">460</a></span><span class=\"t\">        <span class=\"op\">}</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t461\" href=\"#t461\">461</a></span><span class=\"t\">        <span class=\"op\">{</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t462\" href=\"#t462\">462</a></span><span class=\"t\">            <span class=\"str\">\"title\"</span><span class=\"op\">:</span> <span class=\"str\">\"Spatial Programming Paradigm\"</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t463\" href=\"#t463\">463</a></span><span class=\"t\">            <span class=\"str\">\"content\"</span><span class=\"op\">:</span> <span class=\"str\">\"\"\"</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t464\" href=\"#t464\">464</a></span><span class=\"t\"><span class=\"str\">            2D Spatial Code Execution:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t465\" href=\"#t465\">465</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t466\" href=\"#t466\">466</a></span><span class=\"t\"><span class=\"str\">            Benefits:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t467\" href=\"#t467\">467</a></span><span class=\"t\"><span class=\"str\">            - Visual representation of program flow</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t468\" href=\"#t468\">468</a></span><span class=\"t\"><span class=\"str\">            - Intuitive for visual thinkers</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t469\" href=\"#t469\">469</a></span><span class=\"t\"><span class=\"str\">            - Natural for diagram-based reasoning</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t470\" href=\"#t470\">470</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t471\" href=\"#t471\">471</a></span><span class=\"t\"><span class=\"str\">            Implementation:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t472\" href=\"#t472\">472</a></span><span class=\"t\"><span class=\"str\">            - Code execution follows directional arrows</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t473\" href=\"#t473\">473</a></span><span class=\"t\"><span class=\"str\">            - Supports wrapping (Befunge-style)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t474\" href=\"#t474\">474</a></span><span class=\"t\"><span class=\"str\">            - Multiple instruction streams</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t475\" href=\"#t475\">475</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t476\" href=\"#t476\">476</a></span><span class=\"t\"><span class=\"str\">            Use Cases:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t477\" href=\"#t477\">477</a></span><span class=\"t\"><span class=\"str\">            - Data flow visualization</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t478\" href=\"#t478\">478</a></span><span class=\"t\"><span class=\"str\">            - Algorithm animation</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t479\" href=\"#t479\">479</a></span><span class=\"t\"><span class=\"str\">            - Educational visualization</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t480\" href=\"#t480\">480</a></span><span class=\"t\"><span class=\"str\">            \"\"\"</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t481\" href=\"#t481\">481</a></span><span class=\"t\">            <span class=\"str\">\"tags\"</span><span class=\"op\">:</span> <span class=\"op\">[</span><span class=\"str\">\"spatial\"</span><span class=\"op\">,</span> <span class=\"str\">\"2d\"</span><span class=\"op\">,</span> <span class=\"str\">\"visual\"</span><span class=\"op\">]</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t482\" href=\"#t482\">482</a></span><span class=\"t\">        <span class=\"op\">}</span><span class=\"op\">,</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis mis2 show_mis\"><span class=\"n\"><a id=\"t483\" href=\"#t483\">483</a></span><span class=\"t\">    <span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t484\" href=\"#t484\">484</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t485\" href=\"#t485\">485</a></span><span class=\"t\">    <span class=\"key\">for</span> <span class=\"nam\">doc_data</span> <span class=\"key\">in</span> <span class=\"nam\">sample_docs</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t486\" href=\"#t486\">486</a></span><span class=\"t\">        <span class=\"nam\">kb</span><span class=\"op\">.</span><span class=\"nam\">add_document</span><span class=\"op\">(</span><span class=\"op\">**</span><span class=\"nam\">doc_data</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t487\" href=\"#t487\">487</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t488\" href=\"#t488\">488</a></span><span class=\"t\">    <span class=\"nam\">print</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">&#9989; Initialized knowledge base with </span><span class=\"op\">{</span><span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">sample_docs</span><span class=\"op\">)</span><span class=\"op\">}</span><span class=\"fst\"> sample documents</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"mis show_mis\"><span class=\"n\"><a id=\"t489\" href=\"#t489\">489</a></span><span class=\"t\">    <span class=\"key\">return</span> <span class=\"nam\">kb</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t490\" href=\"#t490\">490</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t491\" href=\"#t491\">491</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"exc show_exc\"><span class=\"n\"><a id=\"t492\" href=\"#t492\">492</a></span><span class=\"t\"><span class=\"key\">if</span> <span class=\"nam\">__name__</span> <span class=\"op\">==</span> <span class=\"str\">\"__main__\"</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t493\" href=\"#t493\">493</a></span><span class=\"t\">    <span class=\"com\"># Initialize sample data</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"exc show_exc\"><span class=\"n\"><a id=\"t494\" href=\"#t494\">494</a></span><span class=\"t\">    <span class=\"nam\">kb</span> <span class=\"op\">=</span> <span class=\"nam\">initialize_sample_data</span><span class=\"op\">(</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t495\" href=\"#t495\">495</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t496\" href=\"#t496\">496</a></span><span class=\"t\">    <span class=\"com\"># Test search functionality</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"exc show_exc\"><span class=\"n\"><a id=\"t497\" href=\"#t497\">497</a></span><span class=\"t\">    <span class=\"nam\">print</span><span class=\"op\">(</span><span class=\"str\">\"\\n&#128269; Testing search functionality:\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"exc show_exc\"><span class=\"n\"><a id=\"t498\" href=\"#t498\">498</a></span><span class=\"t\">    <span class=\"nam\">test_queries</span> <span class=\"op\">=</span> <span class=\"op\">[</span><span class=\"str\">\"neurodivergent\"</span><span class=\"op\">,</span> <span class=\"str\">\"compilation\"</span><span class=\"op\">,</span> <span class=\"str\">\"spatial\"</span><span class=\"op\">,</span> <span class=\"str\">\"AI\"</span><span class=\"op\">]</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"pln\"><span class=\"n\"><a id=\"t499\" href=\"#t499\">499</a></span><span class=\"t\">&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"exc show_exc\"><span class=\"n\"><a id=\"t500\" href=\"#t500\">500</a></span><span class=\"t\">    <span class=\"key\">for</span> <span class=\"nam\">query</span> <span class=\"key\">in</span> <span class=\"nam\">test_queries</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"exc show_exc\"><span class=\"n\"><a id=\"t501\" href=\"#t501\">501</a></span><span class=\"t\">        <span class=\"nam\">results</span> <span class=\"op\">=</span> <span class=\"nam\">kb</span><span class=\"op\">.</span><span class=\"nam\">search_documents</span><span class=\"op\">(</span><span class=\"nam\">query</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"exc show_exc\"><span class=\"n\"><a id=\"t502\" href=\"#t502\">502</a></span><span class=\"t\">        <span class=\"nam\">print</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">\\nQuery: '</span><span class=\"op\">{</span><span class=\"nam\">query</span><span class=\"op\">}</span><span class=\"fst\">' - Found </span><span class=\"op\">{</span><span class=\"nam\">len</span><span class=\"op\">(</span><span class=\"nam\">results</span><span class=\"op\">)</span><span class=\"op\">}</span><span class=\"fst\"> results</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"exc show_exc\"><span class=\"n\"><a id=\"t503\" href=\"#t503\">503</a></span><span class=\"t\">        <span class=\"key\">for</span> <span class=\"nam\">doc</span> <span class=\"key\">in</span> <span class=\"nam\">results</span><span class=\"op\">:</span>&nbsp;</span><span class=\"r\"></span></p>\n    <p class=\"exc show_exc\"><span class=\"n\"><a id=\"t504\" href=\"#t504\">504</a></span><span class=\"t\">            <span class=\"nam\">print</span><span class=\"op\">(</span><span class=\"fst\">f\"</span><span class=\"fst\">  - </span><span class=\"op\">{</span><span class=\"nam\">doc</span><span class=\"op\">.</span><span class=\"nam\">title</span><span class=\"op\">}</span><span class=\"fst\">\"</span><span class=\"op\">)</span>&nbsp;</span><span class=\"r\"></span></p>\n</main>\n<footer>\n    <div class=\"content\">\n        <p>\n            <a class=\"nav\" href=\"z_d320893e04ce495b_enhanced_perplexity_client_py.html\">&#xab; prev</a> &nbsp; &nbsp;\n            <a class=\"nav\" href=\"index.html\">&Hat; index</a> &nbsp; &nbsp;\n            <a class=\"nav\" href=\"z_d320893e04ce495b_perplexity_client_py.html\">&#xbb; next</a>\n            &nbsp; &nbsp; &nbsp;\n            <a class=\"nav\" href=\"https://coverage.readthedocs.io/en/7.11.3\">coverage.py v7.11.3</a>,\n            created at 2025-12-04 11:42 +0000\n        </p>\n    </div>\n</footer>\n</body>\n</html>\n",
  "metadata": {},
  "relative_path": "htmlcov\\z_d320893e04ce495b_knowledge_base_py.html",
  "id": "91e1a0e70ba479a07cf55495ee5f76ef"
}