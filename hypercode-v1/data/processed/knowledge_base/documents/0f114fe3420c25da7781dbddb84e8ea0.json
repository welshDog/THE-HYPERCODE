{
  "file_name": "test_mcp_integration.py",
  "file_path": "C:\\Users\\lyndz\\Downloads\\hypercode PROJECT\\hypercode\\src\\core\\hypercode-\\test_mcp_integration.py",
  "file_size": 3500,
  "created": "2025-11-16T21:25:31.091980",
  "modified": "2025-11-17T00:02:48.348171",
  "file_type": "code",
  "content_hash": "e2f79e00fae0acbc6e3ffd263871707e",
  "content_type": "text",
  "content": "#!/usr/bin/env python3\n\"\"\"\nTest script for HyperCode MCP Server integration\n\"\"\"\n\nimport asyncio\nimport json\nimport sys\nfrom pathlib import Path\n\n# Add src to path for importing parser\nsys.path.append(str(Path(__file__).parent / \"src\" / \"parser\"))\n\n\nasync def test_mcp_server():\n    \"\"\"Test the MCP server functionality\"\"\"\n\n    # Import the MCP server\n    sys.path.append(str(Path(__file__).parent / \"mcp\" / \"servers\"))\n    from hypercode_syntax import HyperCodeSyntaxServer\n\n    server = HyperCodeSyntaxServer()\n\n    print(\"ðŸ§ª Testing HyperCode MCP Server Integration\")\n    print(\"=\" * 50)\n\n    # Test 1: Initialize\n    print(\"\\n1. Testing initialization...\")\n    init_request = {\n        \"method\": \"initialize\",\n        \"params\": {\"clientInfo\": {\"name\": \"test-client\", \"version\": \"1.0.0\"}},\n    }\n\n    response = await server.handle_request(init_request)\n    print(f\"âœ… Initialize response: {json.dumps(response, indent=2)}\")\n\n    # Test 2: Document parsing\n    print(\"\\n2. Testing document parsing...\")\n    test_code = \"\"\"ðŸ” @verifiable(\"formal_proof\")\nðŸ“ @ensures(\"output.shape == (batch, classes)\")\nðŸ“‹ @requires(\"input.shape[1] == features\")\nðŸ§  @intent(\"Classify input features\")\nðŸŽ¯ @accessibility(\"high_contrast\", \"dyslexia_font\")\nfunction classifier(input: Tensor[batch, features]) -> Tensor[batch, classes] {\n    ðŸŽ¨ weights = initialize(features, classes)\n    âš¡ logits = matmul(input, weights)\n    ðŸ”„ return softmax(logits)\n}\"\"\"\n\n    parse_request = {\n        \"method\": \"hypercode/parse\",\n        \"params\": {\"uri\": \"test://example.hyper\", \"content\": test_code},\n    }\n\n    # Simulate document change\n    change_request = {\n        \"method\": \"textDocument/didChange\",\n        \"params\": {\n            \"textDocument\": {\"uri\": \"test://example.hyper\"},\n            \"content\": [{\"text\": test_code}],\n        },\n    }\n\n    # First update the cache\n    await server.handle_request(change_request)\n\n    # Then parse\n    response = await server.handle_request(parse_request)\n    print(f\"âœ… Parse response: {json.dumps(response, indent=2)}\")\n\n    # Test 3: Neurodiversity validation\n    print(\"\\n3. Testing neurodiversity validation...\")\n    validate_request = {\n        \"method\": \"hypercode/validate\",\n        \"params\": {\"uri\": \"test://example.hyper\"},\n    }\n\n    response = await server.handle_request(validate_request)\n    print(f\"âœ… Validation response: {json.dumps(response, indent=2)}\")\n\n    # Test 4: Hover functionality\n    print(\"\\n4. Testing hover functionality...\")\n    hover_request = {\n        \"method\": \"textDocument/hover\",\n        \"params\": {\n            \"textDocument\": {\"uri\": \"test://example.hyper\"},\n            \"position\": {\"line\": 0, \"character\": 5},\n        },\n    }\n\n    response = await server.handle_request(hover_request)\n    print(f\"âœ… Hover response: {json.dumps(response, indent=2)}\")\n\n    # Test 5: Completion\n    print(\"\\n5. Testing completion...\")\n    completion_request = {\n        \"method\": \"textDocument/completion\",\n        \"params\": {\n            \"textDocument\": {\"uri\": \"test://example.hyper\"},\n            \"position\": {\"line\": 10, \"character\": 0},\n        },\n    }\n\n    response = await server.handle_request(completion_request)\n    print(f\"âœ… Completion response: {json.dumps(response, indent=2)}\")\n\n    print(\"\\nðŸŽ‰ All MCP Server tests completed successfully!\")\n\n\nif __name__ == \"__main__\":\n    asyncio.run(test_mcp_server())\n",
  "metadata": {},
  "relative_path": "src\\core\\hypercode-\\test_mcp_integration.py",
  "id": "0f114fe3420c25da7781dbddb84e8ea0"
}