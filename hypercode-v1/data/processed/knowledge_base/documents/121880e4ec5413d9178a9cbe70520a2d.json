{
  "file_name": "progress_bars.py",
  "file_path": "C:\\Users\\lyndz\\Downloads\\hypercode PROJECT\\hypercode\\venv_new\\Lib\\site-packages\\pip\\_internal\\cli\\progress_bars.py",
  "file_size": 2717,
  "created": "2025-12-01T01:58:30.001023",
  "modified": "2025-12-01T01:58:30.267112",
  "file_type": "code",
  "content_hash": "287d02c7e164bc804ca6ce8551a82e18",
  "content_type": "text",
  "content": "import functools\nimport sys\nfrom typing import Callable, Generator, Iterable, Iterator, Optional, Tuple\n\nfrom pip._vendor.rich.progress import (\n    BarColumn,\n    DownloadColumn,\n    FileSizeColumn,\n    Progress,\n    ProgressColumn,\n    SpinnerColumn,\n    TextColumn,\n    TimeElapsedColumn,\n    TimeRemainingColumn,\n    TransferSpeedColumn,\n)\n\nfrom pip._internal.cli.spinners import RateLimiter\nfrom pip._internal.utils.logging import get_indentation\n\nDownloadProgressRenderer = Callable[[Iterable[bytes]], Iterator[bytes]]\n\n\ndef _rich_progress_bar(\n    iterable: Iterable[bytes],\n    *,\n    bar_type: str,\n    size: Optional[int],\n) -> Generator[bytes, None, None]:\n    assert bar_type == \"on\", \"This should only be used in the default mode.\"\n\n    if not size:\n        total = float(\"inf\")\n        columns: Tuple[ProgressColumn, ...] = (\n            TextColumn(\"[progress.description]{task.description}\"),\n            SpinnerColumn(\"line\", speed=1.5),\n            FileSizeColumn(),\n            TransferSpeedColumn(),\n            TimeElapsedColumn(),\n        )\n    else:\n        total = size\n        columns = (\n            TextColumn(\"[progress.description]{task.description}\"),\n            BarColumn(),\n            DownloadColumn(),\n            TransferSpeedColumn(),\n            TextColumn(\"eta\"),\n            TimeRemainingColumn(),\n        )\n\n    progress = Progress(*columns, refresh_per_second=5)\n    task_id = progress.add_task(\" \" * (get_indentation() + 2), total=total)\n    with progress:\n        for chunk in iterable:\n            yield chunk\n            progress.update(task_id, advance=len(chunk))\n\n\ndef _raw_progress_bar(\n    iterable: Iterable[bytes],\n    *,\n    size: Optional[int],\n) -> Generator[bytes, None, None]:\n    def write_progress(current: int, total: int) -> None:\n        sys.stdout.write(f\"Progress {current} of {total}\\n\")\n        sys.stdout.flush()\n\n    current = 0\n    total = size or 0\n    rate_limiter = RateLimiter(0.25)\n\n    write_progress(current, total)\n    for chunk in iterable:\n        current += len(chunk)\n        if rate_limiter.ready() or current == total:\n            write_progress(current, total)\n            rate_limiter.reset()\n        yield chunk\n\n\ndef get_download_progress_renderer(\n    *, bar_type: str, size: Optional[int] = None\n) -> DownloadProgressRenderer:\n    \"\"\"Get an object that can be used to render the download progress.\n\n    Returns a callable, that takes an iterable to \"wrap\".\n    \"\"\"\n    if bar_type == \"on\":\n        return functools.partial(_rich_progress_bar, bar_type=bar_type, size=size)\n    elif bar_type == \"raw\":\n        return functools.partial(_raw_progress_bar, size=size)\n    else:\n        return iter  # no-op, when passed an iterator\n",
  "metadata": {},
  "relative_path": "venv_new\\Lib\\site-packages\\pip\\_internal\\cli\\progress_bars.py",
  "id": "121880e4ec5413d9178a9cbe70520a2d"
}