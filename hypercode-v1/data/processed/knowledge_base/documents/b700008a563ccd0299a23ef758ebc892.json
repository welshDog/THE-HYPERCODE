{
  "file_name": "database_integration.hc",
  "file_path": "C:\\Users\\lyndz\\Downloads\\hypercode PROJECT\\hypercode\\examples\\database_integration.hc",
  "file_size": 18647,
  "created": "2025-11-23T12:01:48.464271",
  "modified": "2025-11-23T12:01:48.464271",
  "file_type": "other",
  "content_hash": "cdc9513ea148f0ef88362a1b3fd717ef",
  "content_type": "text/unknown",
  "content": "# ğŸ—„ï¸ Database Integration Example\n# Demonstrates HyperCode's neurodivergent-friendly database operations\n\nimport { Database, QueryBuilder, ORM } from hypercode:data\nimport { Validation, Encryption, Logger } from hypercode:utils\nimport { DateTime, UUID } from hypercode:core\n\n# ğŸ—„ï¸ Database Configuration\napp_db Database {\n    # ğŸ¯ Connection settings (visual clarity)\n    connection: {\n        type: \"postgresql\"\n        host: \"localhost\"\n        port: 5432\n        database: \"hypercode_app\"\n        username: \"app_user\"\n        password: env(\"DB_PASSWORD\")  # Secure environment variable\n        \n        # ğŸ§  Accessibility: Clear connection status\n        pool_size: 10\n        timeout: 30\n        retry_attempts: 3\n    }\n    \n    # ğŸ“Š Schema definition (visual structure)\n    schema: {\n        # ğŸ‘¥ Users table\n        users: {\n            id: UUID PRIMARY_KEY DEFAULT_GENERATE\n            email: TEXT UNIQUE NOT_NULL\n            username: TEXT UNIQUE NOT_NULL\n            password_hash: TEXT NOT_NULL\n            first_name: TEXT\n            last_name: TEXT\n            created_at: TIMESTAMP DEFAULT_NOW\n            updated_at: TIMESTAMP DEFAULT_NOW\n            last_login: TIMESTAMP NULL\n            is_active: BOOLEAN DEFAULT_TRUE\n            profile: JSON  # User preferences, settings\n        }\n        \n        # ğŸ“ Posts table\n        posts: {\n            id: UUID PRIMARY_KEY DEFAULT_GENERATE\n            user_id: UUID REFERENCES users(id) ON_DELETE_CASCADE\n            title: TEXT NOT_NULL\n            content: TEXT NOT_NULL\n            slug: TEXT UNIQUE NOT_NULL\n            status: TEXT DEFAULT \"draft\"  # draft, published, archived\n            published_at: TIMESTAMP NULL\n            created_at: TIMESTAMP DEFAULT_NOW\n            updated_at: TIMESTAMP DEFAULT_NOW\n            tags: ARRAY[TEXT] DEFAULT \"{}\"\n            metadata: JSON  # SEO, analytics data\n        }\n        \n        # ğŸ’¬ Comments table\n        comments: {\n            id: UUID PRIMARY_KEY DEFAULT_GENERATE\n            post_id: UUID REFERENCES posts(id) ON_DELETE_CASCADE\n            user_id: UUID REFERENCES users(id) ON_DELETE_CASCADE\n            content: TEXT NOT_NULL\n            parent_id: UUID NULL REFERENCES comments(id) ON_DELETE_CASCADE\n            status: TEXT DEFAULT \"published\"  # published, hidden, deleted\n            created_at: TIMESTAMP DEFAULT_NOW\n            updated_at: TIMESTAMP DEFAULT_NOW\n        }\n        \n        # ğŸ·ï¸ Categories table\n        categories: {\n            id: UUID PRIMARY_KEY DEFAULT_GENERATE\n            name: TEXT UNIQUE NOT_NULL\n            slug: TEXT UNIQUE NOT_NULL\n            description: TEXT\n            color: TEXT DEFAULT \"#2563eb\"  # For UI theming\n            created_at: TIMESTAMP DEFAULT_NOW\n        }\n        \n        # ğŸ”— Post-Category junction table\n        post_categories: {\n            post_id: UUID REFERENCES posts(id) ON_DELETE_CASCADE\n            category_id: UUID REFERENCES categories(id) ON_DELETE_CASCADE\n            created_at: TIMESTAMP DEFAULT_NOW\n            PRIMARY_KEY: (post_id, category_id)\n        }\n    }\n    \n    # ğŸ§  Migrations (visual version control)\n    migrations: {\n        version: \"1.0.0\"\n        auto_migrate: true\n        rollback_on_error: false\n    }\n}\n\n# ğŸ¯ ORM Models (visual object mapping)\n\nmodel User {\n    table: \"users\"\n    \n    # ğŸ“ Fields with validation\n    fields: {\n        id: UUID PRIMARY_KEY\n        email: {\n            type: TEXT\n            validation: {\n                required: true\n                email: true\n                unique: true\n                message: \"ğŸ“§ Please enter a valid email address\"\n            }\n        }\n        username: {\n            type: TEXT\n            validation: {\n                required: true\n                min_length: 3\n                max_length: 30\n                pattern: \"^[a-zA-Z0-9_]+$\"\n                message: \"ğŸ‘¤ Username must be 3-30 characters, letters/numbers/underscores only\"\n            }\n        }\n        password_hash: {\n            type: TEXT\n            validation: {\n                required: true\n                min_length: 60  # bcrypt hash length\n                message: \"ğŸ”’ Invalid password hash\"\n            }\n        }\n        first_name: {\n            type: TEXT\n            validation: {\n                max_length: 50\n                message: \"ğŸ“ First name too long\"\n            }\n        }\n        last_name: {\n            type: TEXT\n            validation: {\n                max_length: 50\n                message: \"ğŸ“ Last name too long\"\n            }\n        }\n        is_active: {\n            type: BOOLEAN\n            default: true\n        }\n        profile: {\n            type: JSON\n            default: \"{}\"\n        }\n    }\n    \n    # ğŸ” Relationships (visual connections)\n    relationships: {\n        posts: {\n            type: \"has_many\"\n            model: \"Post\"\n            foreign_key: \"user_id\"\n            cascade_delete: true\n        }\n        comments: {\n            type: \"has_many\"\n            model: \"Comment\"\n            foreign_key: \"user_id\"\n            cascade_delete: true\n        }\n    }\n    \n    # ğŸ¯ Methods (business logic)\n    methods: {\n        # ğŸ” Authentication\n        authenticate(password) {\n            # ğŸ§  Clear authentication flow\n            if NOT this.is_active {\n                return {\n                    success: false\n                    message: \"âŒ Account is deactivated\"\n                }\n            }\n            \n            # ğŸ”’ Verify password\n            password_valid â† Encryption.verify(password, this.password_hash)\n            \n            if password_valid {\n                # ğŸ“ Update last login\n                this.update({last_login: DateTime.now()})\n                \n                return {\n                    success: true\n                    message: \"âœ… Authentication successful\"\n                    user: this.sanitize()  # Remove sensitive data\n                }\n            } else {\n                return {\n                    success: false\n                    message: \"âŒ Invalid password\"\n                }\n            }\n        }\n        \n        # ğŸ§¹ Sanitize user data (remove sensitive info)\n        sanitize() {\n            return {\n                id: this.id\n                email: this.email\n                username: this.username\n                first_name: this.first_name\n                last_name: this.last_name\n                created_at: this.created_at\n                last_login: this.last_login\n                profile: this.profile\n            }\n        }\n        \n        # ğŸ“ Update profile\n        update_profile(profile_data) {\n            # âœ… Validate profile data\n            validation â† Validation.validate(profile_data, {\n                bio: {max_length: 500}\n                website: {url: true}\n                location: {max_length: 100}\n                theme: {in: [\"light\", \"dark\", \"auto\"]}\n            })\n            \n            if NOT validation.valid {\n                return {\n                    success: false\n                    message: \"âŒ Invalid profile data\"\n                    errors: validation.errors\n                }\n            }\n            \n            # ğŸ’¾ Update profile\n            result â† this.update({\n                profile: merge(this.profile, profile_data)\n            })\n            \n            return result\n        }\n    }\n}\n\nmodel Post {\n    table: \"posts\"\n    \n    # ğŸ“ Fields\n    fields: {\n        id: UUID PRIMARY_KEY\n        user_id: UUID REFERENCES users(id)\n        title: {\n            type: TEXT\n            validation: {\n                required: true\n                min_length: 5\n                max_length: 200\n                message: \"ğŸ“ Title must be 5-200 characters\"\n            }\n        }\n        content: {\n            type: TEXT\n            validation: {\n                required: true\n                min_length: 10\n                message: \"ğŸ“„ Content must be at least 10 characters\"\n            }\n        }\n        slug: {\n            type: TEXT\n            validation: {\n                required: true\n                unique: true\n                pattern: \"^[a-z0-9-]+$\"\n                message: \"ğŸ”— Slug must contain only lowercase letters, numbers, and hyphens\"\n            }\n        }\n        status: {\n            type: TEXT\n            validation: {\n                in: [\"draft\", \"published\", \"archived\"]\n                message: \"ğŸ“Š Status must be draft, published, or archived\"\n            }\n            default: \"draft\"\n        }\n        tags: {\n            type: ARRAY[TEXT]\n            default: \"{}\"\n        }\n    }\n    \n    # ğŸ” Relationships\n    relationships: {\n        author: {\n            type: \"belongs_to\"\n            model: \"User\"\n            foreign_key: \"user_id\"\n        }\n        comments: {\n            type: \"has_many\"\n            model: \"Comment\"\n            foreign_key: \"post_id\"\n            cascade_delete: true\n        }\n        categories: {\n            type: \"has_many\"\n            through: \"post_categories\"\n            model: \"Category\"\n        }\n    }\n    \n    # ğŸ¯ Methods\n    methods: {\n        # ğŸ“– Publish post\n        publish() {\n            if this.status == \"published\" {\n                return {\n                    success: false\n                    message: \"âŒ Post is already published\"\n                }\n            }\n            \n            result â† this.update({\n                status: \"published\"\n                published_at: DateTime.now()\n            })\n            \n            if result.success {\n                # ğŸ“ Log publication\n                Logger.info(\"Post published\", {\n                    post_id: this.id\n                    title: this.title\n                    user_id: this.user_id\n                })\n            }\n            \n            return result\n        }\n        \n        # ğŸ·ï¸ Add category\n        add_category(category_id) {\n            # ğŸ” Check if category exists\n            category â† Category.find(category_id)\n            if NOT category {\n                return {\n                    success: false\n                    message: \"âŒ Category not found\"\n                }\n            }\n            \n            # ğŸ”— Create junction record\n            result â† app_db.insert(\"post_categories\", {\n                post_id: this.id\n                category_id: category_id\n            })\n            \n            return result\n        }\n        \n        # ğŸ“Š Get statistics\n        get_stats() {\n            comment_count â† Comment.where(\"post_id = ?\", [this.id]).count()\n            \n            return {\n                comments: comment_count\n                views: this.metadata.views or 0\n                likes: this.metadata.likes or 0\n                word_count: length(split(this.content, \" \"))\n                reading_time: ceil(length(split(this.content, \" \")) / 200)  # 200 wpm\n            }\n        }\n    }\n}\n\n# ğŸ”§ Database Operations Examples\n\nfunction create_user_example() {\n    # ğŸ‘¤ Create new user with validation\n    user_data â† {\n        email: \"user@example.com\"\n        username: \"newuser123\"\n        password: \"secure_password_123\"\n        first_name: \"John\"\n        last_name: \"Doe\"\n        profile: {\n            bio: \"Passionate developer and HyperCode enthusiast\"\n            website: \"https://example.com\"\n            location: \"San Francisco, CA\"\n            theme: \"dark\"\n        }\n    }\n    \n    # âœ… Validate user data\n    validation â† Validation.validate(user_data, {\n        email: {required: true, email: true}\n        username: {required: true, min_length: 3}\n        password: {required: true, min_length: 8}\n    })\n    \n    if NOT validation.valid {\n        return {\n            success: false\n            message: \"âŒ Validation failed\"\n            errors: validation.errors\n        }\n    }\n    \n    # ğŸ”’ Hash password\n    password_hash â† Encryption.hash(user_data.password)\n    \n    # ğŸ‘¤ Create user\n    user â† User.create({\n        email: user_data.email\n        username: user_data.username\n        password_hash: password_hash\n        first_name: user_data.first_name\n        last_name: user_data.last_name\n        profile: user_data.profile\n    })\n    \n    if user.success {\n        Logger.info(\"User created\", {\n            user_id: user.data.id\n            username: user.data.username\n        })\n        \n        return {\n            success: true\n            message: \"âœ… User created successfully\"\n            user: user.data.sanitize()\n        }\n    } else {\n        return {\n            success: false\n            message: \"âŒ Failed to create user\"\n            error: user.error\n        }\n    }\n}\n\nfunction create_blog_post_example() {\n    # ğŸ“ Create blog post with categories\n    post_data â† {\n        user_id: \"550e8400-e29b-41d4-a716-446655440000\"  # Example user ID\n        title: \"Getting Started with HyperCode\"\n        content: \"HyperCode is a revolutionary programming language designed with neurodivergent developers in mind. Its visual syntax and clear structure make coding more accessible and enjoyable...\"\n        slug: \"getting-started-with-hypercode\"\n        tags: [\"hypercode\", \"programming\", \"neurodiversity\", \"tutorial\"]\n        status: \"draft\"\n    }\n    \n    # ğŸ“ Create post\n    post â† Post.create(post_data)\n    \n    if post.success {\n        # ğŸ·ï¸ Add categories\n        categories â† [\"programming\", \"tutorials\"]\n        \n        for category_name in categories {\n            category â† Category.where(\"slug = ?\", [category_name]).first()\n            if category {\n                post.data.add_category(category.id)\n            }\n        }\n        \n        # ğŸ“Š Get post statistics\n        stats â† post.data.get_stats()\n        \n        return {\n            success: true\n            message: \"âœ… Post created successfully\"\n            post: post.data\n            stats: stats\n        }\n    } else {\n        return {\n            success: false\n            message: \"âŒ Failed to create post\"\n            error: post.error\n        }\n    }\n}\n\nfunction complex_query_example() {\n    # ğŸ” Complex query with joins and aggregations\n    \n    # ğŸ“Š Get posts with author info and comment counts\n    popular_posts â† QueryBuilder.select({\n        # ğŸ“ Post fields\n        \"p.id\": \"post_id\"\n        \"p.title\": \"title\"\n        \"p.slug\": \"slug\"\n        \"p.published_at\": \"published_at\"\n        \n        # ğŸ‘¤ Author fields\n        \"u.username\": \"author_username\"\n        \"u.first_name\": \"author_first_name\"\n        \"u.last_name\": \"author_last_name\"\n        \n        # ğŸ’¬ Comment count\n        \"COUNT(c.id)\": \"comment_count\"\n        \n        # ğŸ·ï¸ Category names\n        \"ARRAY_AGG(cat.name)\": \"categories\"\n    })\n    .from(\"posts\", \"p\")\n    .join(\"users\", \"u\", \"p.user_id = u.id\")\n    .left_join(\"comments\", \"c\", \"p.id = c.post_id AND c.status = 'published'\")\n    .left_join(\"post_categories\", \"pc\", \"p.id = pc.post_id\")\n    .left_join(\"categories\", \"cat\", \"pc.category_id = cat.id\")\n    .where(\"p.status = ?\", [\"published\"])\n    .where(\"p.published_at >= ?\", [DateTime.now().subtract(days: 30)])\n    .group_by(\"p.id, u.id\")\n    .order_by(\"comment_count DESC\")\n    .limit(10)\n    .execute()\n    \n    return popular_posts\n}\n\nfunction transaction_example() {\n    # ğŸ”„ Transaction example for complex operations\n    \n    result â† app_db.transaction(function(tx) {\n        # ğŸ‘¤ Create user\n        user â† tx.insert(\"users\", {\n            email: \"transaction@example.com\"\n            username: \"tx_user\"\n            password_hash: Encryption.hash(\"password123\")\n        })\n        \n        if NOT user.success {\n            tx.rollback()\n            return {success: false, message: \"âŒ Failed to create user\"}\n        }\n        \n        # ğŸ“ Create welcome post\n        post â† tx.insert(\"posts\", {\n            user_id: user.data.id\n            title: \"My First Post\"\n            content: \"Hello, HyperCode world!\"\n            slug: \"my-first-post\"\n            status: \"published\"\n            published_at: DateTime.now()\n        })\n        \n        if NOT post.success {\n            tx.rollback()\n            return {success: false, message: \"âŒ Failed to create post\"}\n        }\n        \n        # âœ… Commit transaction\n        tx.commit()\n        \n        return {\n            success: true\n            message: \"âœ… User and post created successfully\"\n            user: user.data\n            post: post.data\n        }\n    })\n    \n    return result\n}\n\n# ğŸš€ Main application\nmain() {\n    print(\"ğŸ—„ï¸ Database Integration Example\")\n    print(\"ğŸ“ Demonstrating HyperCode's database capabilities\")\n    print(\"ğŸ§  Features:\")\n    print(\"   ğŸ¯ Visual schema definition\")\n    print(\"   ğŸ” ORM with relationships\")\n    print(\"   âœ… Built-in validation\")\n    print(\"   ğŸ”„ Transaction support\")\n    print(\"   ğŸ”’ Security and encryption\")\n    print(\"   ğŸ“Š Complex queries\")\n    \n    # ğŸ—„ï¸ Initialize database\n    if app_db.connect() {\n        print(\"âœ… Database connected successfully!\")\n        \n        # ğŸ”„ Run migrations\n        app_db.migrate()\n        \n        # ğŸ‘¤ Create sample user\n        user_result â† create_user_example()\n        print(user_result.message)\n        \n        # ğŸ“ Create sample post\n        post_result â† create_blog_post_example()\n        print(post_result.message)\n        \n        # ğŸ” Run complex query\n        posts â† complex_query_example()\n        print(\"ğŸ“Š Found {length(posts)} popular posts\")\n        \n        # ğŸ”„ Test transaction\n        tx_result â† transaction_example()\n        print(tx_result.message)\n        \n        print(\"âœ… Database examples completed! ğŸ‰\")\n    } else {\n        print(\"âŒ Failed to connect to database\")\n    }\n}\n\n# ğŸ§  Accessibility Features:\n# - Clear visual structure with emojis\n# - Consistent error handling patterns\n# - Self-documenting code\n# - Predictable response formats\n# - Visual validation feedback\n# - Color-coded status indicators\n",
  "metadata": {},
  "relative_path": "examples\\database_integration.hc",
  "id": "b700008a563ccd0299a23ef758ebc892"
}