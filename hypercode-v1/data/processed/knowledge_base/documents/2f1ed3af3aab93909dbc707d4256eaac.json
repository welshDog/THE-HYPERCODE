{
  "file_name": "local_health_scanner.py",
  "file_path": "C:\\Users\\lyndz\\Downloads\\hypercode PROJECT\\hypercode\\src\\utils\\local_health_scanner.py",
  "file_size": 6012,
  "created": "2025-11-23T21:19:30.866278",
  "modified": "2025-11-23T21:19:32.037494",
  "file_type": "code",
  "content_hash": "f52373a7438189995ffbfdbc38c7b48f",
  "content_type": "text",
  "content": "#!/usr/bin/env python3\n\"\"\"\nLocal Project Health Scanner for HyperCode\nAnalyzes project structure, code quality, and documentation\n\"\"\"\n\nimport ast\nimport os\nimport re\nfrom pathlib import Path\nfrom typing import Dict, List, Tuple\n\n# Project configuration\nPROJECT_ROOT = Path(__file__).parent\nSRC_DIR = PROJECT_ROOT / \"src\"\nDOCS_DIR = PROJECT_ROOT / \"docs\"\nTEST_DIR = PROJECT_ROOT / \"tests\"\n\nclass ProjectScanner:\n    \"\"\"Scans the project for health metrics without external dependencies\"\"\"\n    \n    def __init__(self):\n        self.metrics = {\n            \"files_scanned\": 0,\n            \"total_lines\": 0,\n            \"docstring_coverage\": 0,\n            \"function_count\": 0,\n            \"class_count\": 0,\n            \"todo_count\": 0,\n            \"test_coverage\": 0,\n            \"errors\": []\n        }\n    \n    def scan_project(self) -> Dict:\n        \"\"\"Scan the entire project and return health metrics\"\"\"\n        self._scan_directory(SRC_DIR)\n        self._check_documentation()\n        self._check_tests()\n        self._calculate_metrics()\n        return self.metrics\n    \n    def _scan_directory(self, directory: Path) -> None:\n        \"\"\"Recursively scan a directory for Python files\"\"\"\n        for item in directory.rglob(\"*.py\"):\n            if \"__pycache__\" in str(item) or \".venv\" in str(item):\n                continue\n                \n            self.metrics[\"files_scanned\"] += 1\n            self._analyze_file(item)\n    \n    def _analyze_file(self, file_path: Path) -> None:\n        \"\"\"Analyze a single Python file\"\"\"\n        try:\n            with open(file_path, 'r', encoding='utf-8') as f:\n                content = f.read()\n                \n            # Count TODOs\n            self.metrics[\"todo_count\"] += len(re.findall(r'#\\s*TODO', content, re.IGNORECASE))\n            \n            # Basic line count\n            lines = content.splitlines()\n            self.metrics[\"total_lines\"] += len(lines)\n            \n            # Parse AST for more complex analysis\n            try:\n                tree = ast.parse(content)\n                self._analyze_ast(tree)\n            except SyntaxError as e:\n                self.metrics[\"errors\"].append(f\"Syntax error in {file_path}: {e}\")\n                \n        except Exception as e:\n            self.metrics[\"errors\"].append(f\"Error processing {file_path}: {e}\")\n    \n    def _analyze_ast(self, node) -> None:\n        \"\"\"Analyze Python AST for code quality metrics\"\"\"\n        if isinstance(node, ast.FunctionDef):\n            self.metrics[\"function_count\"] += 1\n            if not ast.get_docstring(node):\n                self.metrics[\"docstring_coverage\"] -= 1\n            else:\n                self.metrics[\"docstring_coverage\"] += 1\n                \n        elif isinstance(node, ast.ClassDef):\n            self.metrics[\"class_count\"] += 1\n            if not ast.get_docstring(node):\n                self.metrics[\"docstring_coverage\"] -= 1\n            else:\n                self.metrics[\"docstring_coverage\"] += 1\n        \n        # Recurse into child nodes\n        for child in ast.iter_child_nodes(node):\n            self._analyze_ast(child)\n    \n    def _check_documentation(self) -> None:\n        \"\"\"Check documentation coverage\"\"\"\n        if not DOCS_DIR.exists():\n            self.metrics[\"errors\"].append(\"No docs/ directory found\")\n            return\n            \n        # Simple check for README and other key docs\n        required_docs = [\"README.md\", \"CONTRIBUTING.md\", \"LICENSE\"]\n        for doc in required_docs:\n            if not (PROJECT_ROOT / doc).exists():\n                self.metrics[\"errors\"].append(f\"Missing documentation: {doc}\")\n    \n    def _check_tests(self) -> None:\n        \"\"\"Check test coverage\"\"\"\n        if not TEST_DIR.exists():\n            self.metrics[\"errors\"].append(\"No tests/ directory found\")\n            return\n            \n        # Simple test file check\n        test_files = list(TEST_DIR.rglob(\"test_*.py\"))\n        if not test_files:\n            self.metrics[\"errors\"].append(\"No test files found (test_*.py)\")\n    \n    def _calculate_metrics(self) -> None:\n        \"\"\"Calculate final metrics\"\"\"\n        # Calculate docstring coverage percentage\n        total_items = self.metrics[\"function_count\"] + self.metrics[\"class_count\"]\n        if total_items > 0:\n            self.metrics[\"docstring_coverage\"] = max(0, \n                (self.metrics[\"docstring_coverage\"] / total_items) * 100\n            )\n        else:\n            self.metrics[\"docstring_coverage\"] = 0\n\ndef print_health_report(metrics: Dict) -> None:\n    \"\"\"Print a formatted health report\"\"\"\n    print(\"\\n\" + \"=\"*50)\n    print(\"  HYPERCODE PROJECT HEALTH REPORT\")\n    print(\"=\"*50)\n    \n    print(\"\\nüìä CODE METRICS\")\n    print(f\"  ‚Ä¢ Files Scanned: {metrics['files_scanned']}\")\n    print(f\"  ‚Ä¢ Total Lines: {metrics['total_lines']}\")\n    print(f\"  ‚Ä¢ Functions: {metrics['function_count']}\")\n    print(f\"  ‚Ä¢ Classes: {metrics['class_count']}\")\n    print(f\"  ‚Ä¢ Docstring Coverage: {metrics['docstring_coverage']:.1f}%\")\n    \n    print(\"\\n‚ö†Ô∏è  ISSUES FOUND\")\n    if metrics['errors']:\n        for error in metrics['errors']:\n            print(f\"  ‚Ä¢ {error}\")\n    else:\n        print(\"  No critical issues found!\")\n    \n    print(\"\\nüîç RECOMMENDATIONS\")\n    if metrics['todo_count'] > 0:\n        print(f\"  ‚Ä¢ Address {metrics['todo_count']} TODO comments\")\n    if metrics['docstring_coverage'] < 80:\n        print(\"  ‚Ä¢ Improve documentation coverage (aim for >80%)\")\n    if not TEST_DIR.exists():\n        print(\"  ‚Ä¢ Add unit tests in the tests/ directory\")\n    \n    print(\"\\n\" + \"=\"*50 + \"\\n\")\n\ndef main():\n    \"\"\"Main function to run the health scanner\"\"\"\n    print(\"üîç Scanning HyperCode project...\")\n    scanner = ProjectScanner()\n    metrics = scanner.scan_project()\n    print_health_report(metrics)\n\nif __name__ == \"__main__\":\n    main()\n",
  "metadata": {},
  "relative_path": "src\\utils\\local_health_scanner.py",
  "id": "2f1ed3af3aab93909dbc707d4256eaac"
}