{
  "file_name": "build.py",
  "file_path": "C:\\Users\\lyndz\\Downloads\\hypercode PROJECT\\hypercode\\src\\core\\hypercode-\\src\\build.py",
  "file_size": 2954,
  "created": "2025-11-15T15:54:41.038296",
  "modified": "2025-11-17T03:54:41.294436",
  "file_type": "code",
  "content_hash": "66c036d902210fce917920f2ac99a836",
  "content_type": "text",
  "content": "# Copyright 2025 welshDog (Lyndz Williams)\n#\n# Licensed under the MIT License (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     https://opensource.org/licenses/MIT\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\n\"\"\"\nBuild script for the HyperCode language.\n\nThis script provides a command-line interface to compile HyperCode source files\nto a specified target language (currently, only Python is supported).\n\"\"\"\n\nimport argparse\nimport sys\nfrom pathlib import Path\n\n# Add project root to the Python path to allow imports from core, backends, etc.\nsys.path.append(str(Path(__file__).parent))\n\nfrom backends.python import PythonBackend\nfrom core.parser import Parser\nfrom hypercode.core.lexer import Lexer\n\n\ndef build(source_file: str, target: str = \"python\"):\n    \"\"\"\n    Builds a HyperCode source file to the target language.\n\n    Args:\n        source_file: The path to the HyperCode source file (.hc).\n        target: The target language for compilation.\n    \"\"\"\n    print(f\"Building {source_file} for target '{target}'...\")\n\n    source_path = Path(source_file)\n    if not source_path.exists():\n        print(f\"Error: Source file not found at '{source_file}'\")\n        sys.exit(1)\n\n    source_code = source_path.read_text()\n\n    # 1. Lexing\n    lexer = Lexer()\n    tokens = lexer.tokenize(source_code)\n    print(f\"Generated {len(tokens)} tokens.\")\n\n    # 2. Parsing\n    parser = Parser(tokens)\n    ast = parser.parse_program()\n    print(\"Successfully generated AST.\")\n\n    # 3. Code Generation\n    if target == \"python\":\n        backend = PythonBackend()\n    else:\n        print(f\"Error: Target '{target}' is not supported.\")\n        sys.exit(1)\n\n    output_code = backend.visit(ast)\n    print(\"Successfully generated target code.\")\n\n    # 4. Output\n    output_filename = source_path.stem + \".py\"\n    output_path = source_path.parent / output_filename\n    output_path.write_text(output_code)\n\n    print(\"\\n--- Generated Python Code ---\\n\")\n    print(output_code)\n    print(\"\\n--- End Generated Code ---\\n\")\n    print(f\"âœ… Successfully compiled to '{output_path}'\")\n\n\nif __name__ == \"__main__\":\n    parser = argparse.ArgumentParser(description=\"Build HyperCode source files.\")\n    parser.add_argument(\n        \"source_file\", help=\"The path to the HyperCode source file (.hc).\"\n    )\n    parser.add_argument(\n        \"--target\",\n        default=\"python\",\n        help=\"The target language for compilation (default: python).\",\n    )\n    args = parser.parse_args()\n\n    build(args.source_file, args.target)\n",
  "metadata": {},
  "relative_path": "src\\core\\hypercode-\\src\\build.py",
  "id": "1a644c005b54ad51281e47ef402eb5c5"
}