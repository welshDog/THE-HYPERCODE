{
  "file_name": "server.js",
  "file_path": "C:\\Users\\lyndz\\Downloads\\hypercode PROJECT\\hypercode\\hypercode\\server.js",
  "file_size": 2907,
  "created": "2025-11-30T20:22:52.766024",
  "modified": "2025-11-30T20:22:52.766024",
  "file_type": "code",
  "content_hash": "5952b1e6164a5028832efb100507ebf0",
  "content_type": "text",
  "content": "const express = require('express');\nconst sqlite3 = require('sqlite3').verbose();\nconst cors = require('cors');\nconst bodyParser = require('body-parser');\n\nconst app = express();\nconst port = 3000;\n\napp.use(cors());\napp.use(bodyParser.json());\n\n// Initialize database\nconst db = new sqlite3.Database('./hypercode.db', (err) => {\n    if (err) {\n        console.error('Error connecting to SQLite database', err);\n    } else {\n        console.log('Connected to SQLite database');\n        initializeDatabase();\n    }\n});\n\nfunction initializeDatabase() {\n    // Create tables if they don't exist\n    db.serialize(() => {\n        db.run(`CREATE TABLE IF NOT EXISTS nodes (\n            id TEXT PRIMARY KEY,\n            label TEXT NOT NULL,\n            type TEXT NOT NULL,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )`);\n\n        db.run(`CREATE TABLE IF NOT EXISTS links (\n            id INTEGER PRIMARY KEY AUTOINCREMENT,\n            source_id TEXT NOT NULL,\n            target_id TEXT NOT NULL,\n            type TEXT NOT NULL,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n            FOREIGN KEY (source_id) REFERENCES nodes (id),\n            FOREIGN KEY (target_id) REFERENCES nodes (id),\n            UNIQUE(source_id, target_id, type)\n        )`);\n    });\n}\n\n// API Endpoints\napp.get('/api/nodes', (req, res) => {\n    db.all('SELECT * FROM nodes', [], (err, rows) => {\n        if (err) {\n            res.status(500).json({ error: err.message });\n            return;\n        }\n        res.json(rows);\n    });\n});\n\napp.post('/api/nodes', (req, res) => {\n    const { id, label, type } = req.body;\n    db.run('INSERT INTO nodes (id, label, type) VALUES (?, ?, ?)', \n        [id, label, type], \n        function(err) {\n            if (err) {\n                res.status(400).json({ error: err.message });\n                return;\n            }\n            res.json({ id, label, type });\n        }\n    );\n});\n\napp.get('/api/links', (req, res) => {\n    db.all('SELECT * FROM links', [], (err, rows) => {\n        if (err) {\n            res.status(500).json({ error: err.message });\n            return;\n        }\n        res.json(rows);\n    });\n});\n\napp.post('/api/links', (req, res) => {\n    const { source_id, target_id, type } = req.body;\n    db.run('INSERT INTO links (source_id, target_id, type) VALUES (?, ?, ?)',\n        [source_id, target_id, type],\n        function(err) {\n            if (err) {\n                res.status(400).json({ error: err.message });\n                return;\n            }\n            res.json({ \n                id: this.lastID,\n                source_id,\n                target_id,\n                type\n            });\n        }\n    );\n});\n\n// Start server\napp.listen(port, () => {\n    console.log(`Server running at http://localhost:${port}`);\n});",
  "metadata": {},
  "relative_path": "hypercode\\server.js",
  "id": "e5d7532c9260106b3807d96f9261ee9e"
}